<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: Reve::API</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">Reve::API</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/lib/reve_rb.html">
                lib/reve.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                Object
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
<a href="API.html">API</a> Class. Basic Usage: api = <a
href="API.html#M000101">Reve::API.new</a>(&#8216;my_UserID&#8217;,
&#8216;my_apiKey&#8217;) <a href="API.html#M000106">alliances</a> =
api.alliances # Returns an array of <a
href="Classes/Alliance.html">Reve::Classes::Alliance</a>
</p>
<p>
api.personal_wallet_blanace(:characterid =&gt; 892008733) # Returns an
array of <a
href="Classes/WalletBalance.html">Reve::Classes::WalletBalance</a>. Note
that the CharacterID Number is required here.
</p>
<p>
api.sovereignty :just_hash =&gt; true # Returns the hash for this call with
no Alliance data with it.
</p>
<p>
As of Revision 22 (28 August 2007) all <a href="API.html">API</a> calls
take a parameter, :just_hash, to just get the hash that represents that
particular <a href="API.html">API</a> call; No data related to the call is
returned if :just_hash is present
</p>
<p>
All <a href="API.html">API</a> methods have the functionality to read XML
from an arbitrary location. This could be another webserver, or a XML file
on disk. To use this pass the hash option :url =&gt; <tt>location</tt>
where <tt>location</tt> is a String or URI class. See <a
href="API.html#M000152">format_url_request</a> documentation for more
details.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000106">alliances</a>&nbsp;&nbsp;
      <a href="#M000156">build_save_filename</a>&nbsp;&nbsp;
      <a href="#M000144">certificate_tree</a>&nbsp;&nbsp;
      <a href="#M000104">character_id</a>&nbsp;&nbsp;
      <a href="#M000128">character_medals</a>&nbsp;&nbsp;
      <a href="#M000105">character_name</a>&nbsp;&nbsp;
      <a href="#M000145">character_sheet</a>&nbsp;&nbsp;
      <a href="#M000137">characters</a>&nbsp;&nbsp;
      <a href="#M000154">check_exception</a>&nbsp;&nbsp;
      <a href="#M000150">compute_hash</a>&nbsp;&nbsp;
      <a href="#M000112">conquerable_stations</a>&nbsp;&nbsp;
      <a href="#M000113">conqurable_stations</a>&nbsp;&nbsp;
      <a href="#M000136">corporate_assets_list</a>&nbsp;&nbsp;
      <a href="#M000130">corporate_faction_war_stats</a>&nbsp;&nbsp;
      <a href="#M000117">corporate_industry_jobs</a>&nbsp;&nbsp;
      <a href="#M000142">corporate_kills</a>&nbsp;&nbsp;
      <a href="#M000115">corporate_market_orders</a>&nbsp;&nbsp;
      <a href="#M000126">corporate_medals</a>&nbsp;&nbsp;
      <a href="#M000127">corporate_member_medals</a>&nbsp;&nbsp;
      <a href="#M000146">corporate_member_security</a>&nbsp;&nbsp;
      <a href="#M000148">corporate_shareholders</a>&nbsp;&nbsp;
      <a href="#M000147">corporate_titles</a>&nbsp;&nbsp;
      <a href="#M000121">corporate_wallet_balance</a>&nbsp;&nbsp;
      <a href="#M000124">corporate_wallet_journal</a>&nbsp;&nbsp;
      <a href="#M000123">corporate_wallet_transactions</a>&nbsp;&nbsp;
      <a href="#M000143">corporation_sheet</a>&nbsp;&nbsp;
      <a href="#M000109">errors</a>&nbsp;&nbsp;
      <a href="#M000133">faction_war_occupancy</a>&nbsp;&nbsp;
      <a href="#M000131">faction_war_stats</a>&nbsp;&nbsp;
      <a href="#M000132">faction_war_system_stats</a>&nbsp;&nbsp;
      <a href="#M000134">faction_war_top_stats</a>&nbsp;&nbsp;
      <a href="#M000152">format_url_request</a>&nbsp;&nbsp;
      <a href="#M000153">get_xml</a>&nbsp;&nbsp;
      <a href="#M000107">map_jumps</a>&nbsp;&nbsp;
      <a href="#M000108">map_kills</a>&nbsp;&nbsp;
      <a href="#M000119">member_tracking</a>&nbsp;&nbsp;
      <a href="#M000103">names_to_ids</a>&nbsp;&nbsp;
      <a href="#M000101">new</a>&nbsp;&nbsp;
      <a href="#M000135">personal_assets_list</a>&nbsp;&nbsp;
      <a href="#M000129">personal_faction_war_stats</a>&nbsp;&nbsp;
      <a href="#M000116">personal_industry_jobs</a>&nbsp;&nbsp;
      <a href="#M000141">personal_kills</a>&nbsp;&nbsp;
      <a href="#M000114">personal_market_orders</a>&nbsp;&nbsp;
      <a href="#M000120">personal_wallet_balance</a>&nbsp;&nbsp;
      <a href="#M000125">personal_wallet_journal</a>&nbsp;&nbsp;
      <a href="#M000122">personal_wallet_transactions</a>&nbsp;&nbsp;
      <a href="#M000149">postfields</a>&nbsp;&nbsp;
      <a href="#M000151">process_query</a>&nbsp;&nbsp;
      <a href="#M000157">pull_out_top_10_data</a>&nbsp;&nbsp;
      <a href="#M000111">ref_types</a>&nbsp;&nbsp;
      <a href="#M000102">save_path=</a>&nbsp;&nbsp;
      <a href="#M000155">save_xml</a>&nbsp;&nbsp;
      <a href="#M000138">skill_in_training</a>&nbsp;&nbsp;
      <a href="#M000118">skill_tree</a>&nbsp;&nbsp;
      <a href="#M000110">sovereignty</a>&nbsp;&nbsp;
      <a href="#M000140">starbase_fuel</a>&nbsp;&nbsp;
      <a href="#M000139">starbases</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">cached_until</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">charid</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">current_time</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">http_user_agent</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">key</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">last_hash</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">save_path</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">userid</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000101" class="method-detail">
        <a name="M000101"></a>

        <div class="method-heading">
          <a href="#M000101" class="method-signature">
          <span class="method-name">new</span><span class="method-args">(userid = &quot;&quot;, key = &quot;&quot;, charid = &quot;&quot;)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Create a <a href="API.html#M000101">new</a> <a href="API.html">API</a>
instance. current_time and cached_until are meaningful only for the LAST
call made. Expects:
</p>
<ul>
<li>userid ( Integer | String ) - Your <a href="API.html">API</a> userID

</li>
<li>key ( String ) - Your <a href="API.html">API</a> key (Full key or
restricted key)

</li>
<li>charid ( Integer | String ) - Default characterID for calls requiring it.

</li>
</ul>
<p>
NOTE: All values passed to the constructor are typecasted to a String for
safety.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000101-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000101-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 118</span>
118:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">userid</span> = <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-identifier">key</span> = <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-identifier">charid</span> = <span class="ruby-value str">&quot;&quot;</span>)
119:       <span class="ruby-ivar">@userid</span> = (<span class="ruby-identifier">userid</span> <span class="ruby-operator">||</span> <span class="ruby-value str">&quot;&quot;</span>).<span class="ruby-identifier">to_s</span>
120:       <span class="ruby-ivar">@key</span>    = (<span class="ruby-identifier">key</span>    <span class="ruby-operator">||</span> <span class="ruby-value str">&quot;&quot;</span>).<span class="ruby-identifier">to_s</span>
121:       <span class="ruby-ivar">@charid</span> = (<span class="ruby-identifier">charid</span> <span class="ruby-operator">||</span> <span class="ruby-value str">&quot;&quot;</span>).<span class="ruby-identifier">to_s</span>
122:       
123:       <span class="ruby-ivar">@save_path</span> = <span class="ruby-keyword kw">nil</span>
124: 
125:       <span class="ruby-ivar">@http_user_agent</span> = <span class="ruby-value str">&quot;Reve&quot;</span>
126:       <span class="ruby-ivar">@max_tries</span> = <span class="ruby-value">3</span>
127: 
128:       <span class="ruby-ivar">@current_time</span> = <span class="ruby-keyword kw">nil</span>
129:       <span class="ruby-ivar">@cached_until</span> = <span class="ruby-keyword kw">nil</span>
130:       <span class="ruby-ivar">@last_hash</span> = <span class="ruby-keyword kw">nil</span>
131:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000106" class="method-detail">
        <a name="M000106"></a>

        <div class="method-heading">
          <a href="#M000106" class="method-signature">
          <span class="method-name">alliances</span><span class="method-args">(opts = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Return a list of Alliances and member Corporations from <a
href="http://api.eve-online.com/eve/AllianceList.xml.aspx">api.eve-online.com/eve/AllianceList.xml.aspx</a>
Use the <a href="API.html#M000143">corporation_sheet</a> method to get
information for each member Corporation See also: <a
href="Classes/Alliance.html">Reve::Classes::Alliance</a>, <a
href="Classes/Corporation.html">Reve::Classes::Corporation</a> and <a
href="API.html#M000143">corporation_sheet</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000106-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000106-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 180</span>
180:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">alliances</span>(<span class="ruby-identifier">opts</span> = {})
181:       <span class="ruby-identifier">args</span> = <span class="ruby-identifier">postfields</span>(<span class="ruby-identifier">opts</span>)
182:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">compute_hash</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@alliances_url</span>))
183:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">h</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>
184:       <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">process_query</span>(<span class="ruby-keyword kw">nil</span>,<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@alliances_url</span>,<span class="ruby-keyword kw">true</span>,<span class="ruby-identifier">args</span>)
185:       <span class="ruby-identifier">alliances</span> = []
186:       <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;/eveapi/result/rowset[@name='alliances']/row&quot;</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">alliance</span><span class="ruby-operator">|</span>
187:         <span class="ruby-identifier">alliance_obj</span> = <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">Alliance</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">alliance</span>)
188:         <span class="ruby-identifier">alliance</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;rowset[@name='memberCorporations']/row&quot;</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">corporation</span><span class="ruby-operator">|</span>
189:           <span class="ruby-identifier">alliance_obj</span>.<span class="ruby-identifier">member_corporations</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">Corporation</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">corporation</span>)
190:         <span class="ruby-keyword kw">end</span>
191:         <span class="ruby-identifier">alliances</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">alliance_obj</span>
192:       <span class="ruby-keyword kw">end</span>
193:       <span class="ruby-identifier">alliances</span>
194:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000144" class="method-detail">
        <a name="M000144"></a>

        <div class="method-heading">
          <a href="#M000144" class="method-signature">
          <span class="method-name">certificate_tree</span><span class="method-args">(opts = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a <a
href="Classes/CertificateTree.html">Reve::Classes::CertificateTree</a>
object that contains the Certificate tree structure. See the rdoc for <a
href="Classes/CertificateTree.html">Reve::Classes::CertificateTree</a> for
details. See also: <a
href="Classes/CertificateTree.html">Reve::Classes::CertificateTree</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000144-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000144-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 735</span>
735:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">certificate_tree</span>(<span class="ruby-identifier">opts</span> = {})
736:       <span class="ruby-identifier">args</span> = <span class="ruby-identifier">postfields</span>(<span class="ruby-identifier">opts</span>)
737:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">compute_hash</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@certificate_tree_url</span>))
738:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">h</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>
739:       <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">process_query</span>(<span class="ruby-keyword kw">nil</span>,<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@certificate_tree_url</span>,<span class="ruby-keyword kw">true</span>,<span class="ruby-identifier">args</span>)
740:       
741:       <span class="ruby-identifier">tree</span> = <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">CertificateTree</span>.<span class="ruby-identifier">new</span>
742:       <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;/eveapi/result/rowset[@name=categories]/row&quot;</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">category</span><span class="ruby-operator">|</span>
743:         <span class="ruby-identifier">cat</span> = <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">CertificateCategory</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">category</span>)
744:         <span class="ruby-identifier">category</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;rowset[@name=classes]/row&quot;</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">klass</span><span class="ruby-operator">|</span>
745:           <span class="ruby-identifier">kl</span> = <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">CertificateClass</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">klass</span>)
746:           <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;rowset[@name=certificates]/row&quot;</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">certificate</span><span class="ruby-operator">|</span>
747:             <span class="ruby-identifier">cert</span> = <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">Certificate</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">certificate</span>)
748:             <span class="ruby-identifier">certificate</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;rowset[@name=requiredSkills]/row&quot;</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">skill</span><span class="ruby-operator">|</span>
749:               <span class="ruby-identifier">cert</span>.<span class="ruby-identifier">required_skills</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">CertificateRequiredSkill</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">skill</span>)
750:             <span class="ruby-keyword kw">end</span>
751:             <span class="ruby-identifier">certificate</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;rowset[@name=requiredCertificates]/row&quot;</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">requiredcert</span><span class="ruby-operator">|</span>
752:               <span class="ruby-identifier">cert</span>.<span class="ruby-identifier">required_certificates</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">CertificateRequiredCertificate</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">requiredcert</span>)
753:             <span class="ruby-keyword kw">end</span>
754:             <span class="ruby-identifier">kl</span>.<span class="ruby-identifier">certificates</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">cert</span>
755:           <span class="ruby-keyword kw">end</span>
756:           <span class="ruby-identifier">cat</span>.<span class="ruby-identifier">classes</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">kl</span>
757:         <span class="ruby-keyword kw">end</span>
758:         <span class="ruby-identifier">tree</span>.<span class="ruby-identifier">categories</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">cat</span>
759:       <span class="ruby-keyword kw">end</span>
760:       <span class="ruby-identifier">tree</span>
761:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000104" class="method-detail">
        <a name="M000104"></a>

        <div class="method-heading">
          <span class="method-name">character_id</span><span class="method-args">(opts = {} )</span>
        </div>
      
        <div class="method-description">
          <p>
Alias for <a href="API.html#M000103">names_to_ids</a>
</p>
        </div>
      </div>

      <div id="method-M000128" class="method-detail">
        <a name="M000128"></a>

        <div class="method-heading">
          <a href="#M000128" class="method-signature">
          <span class="method-name">character_medals</span><span class="method-args">(opts = { :characterid =&gt; nil })</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Gets the list of Medals awarded to a Character. Returns a <a
href="Classes/CharacterMedals.html">Reve::Classes::CharacterMedals</a>
object.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000128-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000128-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 435</span>
435:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">character_medals</span>(<span class="ruby-identifier">opts</span> = { <span class="ruby-identifier">:characterid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span> })
436:       <span class="ruby-identifier">args</span> = <span class="ruby-identifier">postfields</span>(<span class="ruby-identifier">opts</span>)
437:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">compute_hash</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@character_medals_url</span>))
438:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">h</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>
439:       <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">process_query</span>(<span class="ruby-keyword kw">nil</span>,<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@character_medals_url</span>,<span class="ruby-keyword kw">true</span>,<span class="ruby-identifier">args</span>)
440:       <span class="ruby-identifier">current</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;/eveapi/result/rowset[@name=currentCorporation]/row&quot;</span>).<span class="ruby-identifier">inject</span>([]) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">cur</span>,<span class="ruby-identifier">elem</span><span class="ruby-operator">|</span>
441:         <span class="ruby-identifier">cur</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterMedal</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">elem</span>)
442:       <span class="ruby-keyword kw">end</span>
443:       <span class="ruby-identifier">other</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;/eveapi/result/rowset[@name=otherCorporations]/row&quot;</span>).<span class="ruby-identifier">inject</span>([]) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">cur</span>,<span class="ruby-identifier">elem</span><span class="ruby-operator">|</span>
444:         <span class="ruby-identifier">cur</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterMedal</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">elem</span>)
445:       <span class="ruby-keyword kw">end</span>
446:       <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterMedals</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">current</span>,<span class="ruby-identifier">other</span>)
447:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000105" class="method-detail">
        <a name="M000105"></a>

        <div class="method-heading">
          <a href="#M000105" class="method-signature">
          <span class="method-name">character_name</span><span class="method-args">(opts = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Convert ids to Character names. Expects a Hash as a parameter with these
keys:
</p>
<ul>
<li>ids ( Array ) - An Array of Character IDs to fetch the names of.

</li>
</ul>
<p>
See Also: <a href="API.html#M000105">character_name</a>, <a
href="Classes/Character.html">Reve::Classes::Character</a>, <a
href="API.html#M000145">character_sheet</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000105-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000105-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 166</span>
166:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">character_name</span>(<span class="ruby-identifier">opts</span> = {})
167:       <span class="ruby-identifier">ids</span> = <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:ids</span>] <span class="ruby-operator">||</span> []
168:       <span class="ruby-keyword kw">return</span> [] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ids</span>.<span class="ruby-identifier">empty?</span>
169:       <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:ids</span>] = <span class="ruby-identifier">ids</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">','</span>)
170:       <span class="ruby-identifier">compute_hash</span>(  <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@character_name_url</span>) ) <span class="ruby-operator">||</span>
171:         <span class="ruby-identifier">process_query</span>(<span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">Character</span>,<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@character_name_url</span>,<span class="ruby-keyword kw">false</span>,<span class="ruby-identifier">opts</span>)
172:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000145" class="method-detail">
        <a name="M000145"></a>

        <div class="method-heading">
          <a href="#M000145" class="method-signature">
          <span class="method-name">character_sheet</span><span class="method-args">(opts = { :characterid =&gt; nil })</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Gets the CharacterSheet from <a
href="http://api.eve-online.com/char/CharacterSheet.xml.aspx">api.eve-online.com/char/CharacterSheet.xml.aspx</a>
Expects:
</p>
<ul>
<li>characterid ( Fixnum ) - Get the CharacterSheet for this Character

</li>
</ul>
<p>
See also: <a
href="Classes/CharacterSheet.html">Reve::Classes::CharacterSheet</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000145-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000145-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 768</span>
768:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">character_sheet</span>(<span class="ruby-identifier">opts</span> = { <span class="ruby-identifier">:characterid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span> })
769:       <span class="ruby-identifier">args</span> = <span class="ruby-identifier">postfields</span>(<span class="ruby-identifier">opts</span>)
770:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">compute_hash</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@character_sheet_url</span>))
771:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">h</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>
772:       
773:       <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">process_query</span>(<span class="ruby-keyword kw">nil</span>,<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@character_sheet_url</span>,<span class="ruby-keyword kw">true</span>,<span class="ruby-identifier">args</span>)
774:       <span class="ruby-identifier">cs</span> = <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterSheet</span>.<span class="ruby-identifier">new</span>
775: 
776:       [ <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">IntelligenceEnhancer</span>, <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">MemoryEnhancer</span>, <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">CharismaEnhancer</span>,
777:         <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">PerceptionEnhancer</span>, <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">WillpowerEnhancer</span>
778:       ].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">klass</span><span class="ruby-operator">|</span>
779:         <span class="ruby-identifier">xml_attr</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;::&quot;</span>).<span class="ruby-identifier">last</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-value str">&quot;Enhancer&quot;</span>,<span class="ruby-value str">''</span>).<span class="ruby-identifier">downcase</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;Bonus&quot;</span>
780:         <span class="ruby-identifier">i</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-node">&quot;/eveapi/result/attributeEnhancers/#{xml_attr}&quot;</span>).<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;augmentatorName/&quot;</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">to_s</span>,
781:                       <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-node">&quot;/eveapi/result/attributeEnhancers/#{xml_attr}&quot;</span>).<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;augmentatorValue/&quot;</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">to_i</span>)
782:         <span class="ruby-identifier">cs</span>.<span class="ruby-identifier">enhancers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">i</span>
783:       <span class="ruby-keyword kw">end</span>
784: 
785:       [ <span class="ruby-value str">'characterID'</span>, <span class="ruby-value str">'name'</span>, <span class="ruby-value str">'race'</span>, <span class="ruby-value str">'bloodLine'</span>, <span class="ruby-value str">'gender'</span>,<span class="ruby-value str">'corporationName'</span>,
786:         <span class="ruby-value str">'corporationID'</span>,<span class="ruby-value str">'balance'</span>, <span class="ruby-value str">'cloneName'</span>, <span class="ruby-value str">'cloneSkillPoints'</span> 
787:       ].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">field</span><span class="ruby-operator">|</span>
788:         <span class="ruby-identifier">cs</span>.<span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{field.downcase}=&quot;</span>,<span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-node">&quot;/eveapi/result/#{field}/&quot;</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">to_s</span>)
789:       <span class="ruby-keyword kw">end</span>
790:       
791:       [ <span class="ruby-value str">'intelligence'</span>,<span class="ruby-value str">'memory'</span>,<span class="ruby-value str">'charisma'</span>,<span class="ruby-value str">'perception'</span>,<span class="ruby-value str">'willpower'</span> ].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attrib</span><span class="ruby-operator">|</span>
792:         <span class="ruby-identifier">cs</span>.<span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{attrib}=&quot;</span>,<span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-node">&quot;/eveapi/result/attributes/#{attrib}/&quot;</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">to_i</span>) 
793:       <span class="ruby-keyword kw">end</span>
794:       <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;rowset[@name=skills]/row&quot;</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">elem</span><span class="ruby-operator">|</span>
795:         <span class="ruby-identifier">cs</span>.<span class="ruby-identifier">skills</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">Skill</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">elem</span>)
796:       <span class="ruby-keyword kw">end</span>
797:       
798:       <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;rowset[@name=certificates]/row&quot;</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">elem</span><span class="ruby-operator">|</span>
799:         <span class="ruby-identifier">cs</span>.<span class="ruby-identifier">certificate_ids</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">elem</span>[<span class="ruby-value str">'certificateID'</span>].<span class="ruby-identifier">to_i</span>
800:       <span class="ruby-keyword kw">end</span>
801:       [ <span class="ruby-identifier">:corporationRolesAtHQ</span>, <span class="ruby-identifier">:corporationRoles</span>, <span class="ruby-identifier">:corporationRolesAtBase</span>, <span class="ruby-identifier">:corporationRolesAtOther</span> ].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">role_kind</span><span class="ruby-operator">|</span>
802:         <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-node">&quot;rowset[@name=#{role_kind.to_s}]/row&quot;</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">elem</span><span class="ruby-operator">|</span>
803:           <span class="ruby-identifier">arry</span> = []
804:           <span class="ruby-identifier">role</span> = <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">CorporateRole</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">elem</span>)
805:           <span class="ruby-identifier">arry</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">role</span>
806:           <span class="ruby-identifier">cs</span>.<span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{role_kind}=&quot;</span>.<span class="ruby-identifier">to_sym</span>,<span class="ruby-identifier">arry</span>)
807:         <span class="ruby-keyword kw">end</span>
808:       <span class="ruby-keyword kw">end</span>
809:       
810:       <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;rowset[@name=corporationTitles]/row&quot;</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">elem</span><span class="ruby-operator">|</span>
811:         <span class="ruby-identifier">cs</span>.<span class="ruby-identifier">corporate_titles</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">CorporateTitle</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">elem</span>)
812:       <span class="ruby-keyword kw">end</span>
813:       
814:       <span class="ruby-identifier">cs</span>
815:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000137" class="method-detail">
        <a name="M000137"></a>

        <div class="method-heading">
          <a href="#M000137" class="method-signature">
          <span class="method-name">characters</span><span class="method-args">(opts = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a Character list for the associated key and userid from <a
href="http://api.eve-online.com/account/Characters.xml.aspx">api.eve-online.com/account/Characters.xml.aspx</a>
See also: <a href="Classes/Character.html">Reve::Classes::Character</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000137-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000137-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 584</span>
584:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">characters</span>(<span class="ruby-identifier">opts</span> = {})
585:       <span class="ruby-identifier">args</span> = <span class="ruby-identifier">postfields</span>(<span class="ruby-identifier">opts</span>)
586:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">compute_hash</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@characters_url</span>))
587:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">h</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>
588:       <span class="ruby-identifier">process_query</span>(<span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">Character</span>,<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@characters_url</span>,<span class="ruby-keyword kw">false</span>,<span class="ruby-identifier">args</span>)
589:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000112" class="method-detail">
        <a name="M000112"></a>

        <div class="method-heading">
          <a href="#M000112" class="method-signature">
          <span class="method-name">conquerable_stations</span><span class="method-args">(opts = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a list of ConqurableStations and outposts from <a
href="http://api.eve-online.com/eve/ConquerableStationList.xml.aspx">api.eve-online.com/eve/ConquerableStationList.xml.aspx</a>
See also: <a
href="Classes/ConqurableStation.html">Reve::Classes::ConqurableStation</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000112-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000112-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 235</span>
235:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">conquerable_stations</span>(<span class="ruby-identifier">opts</span> = {})
236:       <span class="ruby-identifier">compute_hash</span>(  <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@conqurable_outposts_url</span>) ) <span class="ruby-operator">||</span>
237:           <span class="ruby-identifier">process_query</span>(<span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">ConquerableStation</span>, <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@conqurable_outposts_url</span>, <span class="ruby-keyword kw">false</span>)
238:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000113" class="method-detail">
        <a name="M000113"></a>

        <div class="method-heading">
          <span class="method-name">conqurable_stations</span><span class="method-args">(opts = {})</span>
        </div>
      
        <div class="method-description">
          <p>
Alias for <a href="API.html#M000112">conquerable_stations</a>
</p>
        </div>
      </div>

      <div id="method-M000136" class="method-detail">
        <a name="M000136"></a>

        <div class="method-heading">
          <a href="#M000136" class="method-signature">
          <span class="method-name">corporate_assets_list</span><span class="method-args">(opts = { :characterid =&gt; nil})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Get a list of the Corporate Assets. Pass the characterid of the Corporate
member See also assets_list method
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000136-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000136-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 565</span>
565:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">corporate_assets_list</span>(<span class="ruby-identifier">opts</span> = { <span class="ruby-identifier">:characterid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>})
566:       <span class="ruby-identifier">args</span> = <span class="ruby-identifier">postfields</span>(<span class="ruby-identifier">opts</span>)
567:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">compute_hash</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@corporate_assets_url</span>))
568:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">h</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>
569:       <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">process_query</span>(<span class="ruby-keyword kw">nil</span>,<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@corporate_assets_url</span>,<span class="ruby-keyword kw">true</span>,<span class="ruby-identifier">args</span>)
570:       <span class="ruby-identifier">assets</span> = []
571:       <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;/eveapi/result/rowset/row&quot;</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">container</span><span class="ruby-operator">|</span>
572:         <span class="ruby-identifier">asset_container</span> = <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">AssetContainer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">container</span>)
573:         <span class="ruby-identifier">container</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;rowset[@name='contents']/row&quot;</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">asset</span><span class="ruby-operator">|</span>
574:           <span class="ruby-identifier">asset_container</span>.<span class="ruby-identifier">assets</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">Asset</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">asset</span>)
575:         <span class="ruby-keyword kw">end</span>
576:         <span class="ruby-identifier">assets</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">asset_container</span>
577:       <span class="ruby-keyword kw">end</span>
578:       <span class="ruby-identifier">assets</span>
579:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000130" class="method-detail">
        <a name="M000130"></a>

        <div class="method-heading">
          <a href="#M000130" class="method-signature">
          <span class="method-name">corporate_faction_war_stats</span><span class="method-args">(opts = { :characterid =&gt; nil })</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Gets the CorporateFactionWarStat for the Corporation a Character belongs
to. Expects:
</p>
<ul>
<li>characterid ( Integer | String ) - Get this character&#8216;s corp&#8216;s
CorporateFactionWarStat.

</li>
</ul>
<p>
See Also Reve::Classes::CorporateFactionWarStat and <a
href="API.html#M000129">personal_faction_war_stats</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000130-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000130-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 471</span>
471:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">corporate_faction_war_stats</span>(<span class="ruby-identifier">opts</span> = { <span class="ruby-identifier">:characterid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span> })
472:       <span class="ruby-identifier">args</span> = <span class="ruby-identifier">postfields</span>(<span class="ruby-identifier">opts</span>)
473:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">compute_hash</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@corporate_faction_war_stats_url</span>))
474:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">h</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>
475:       <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">process_query</span>(<span class="ruby-keyword kw">nil</span>,<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@corporate_faction_war_stats_url</span>,<span class="ruby-keyword kw">true</span>,<span class="ruby-identifier">args</span>)    
476:       <span class="ruby-identifier">elems</span> = {}
477:       [ <span class="ruby-identifier">:factionID</span>, <span class="ruby-identifier">:factionName</span>, <span class="ruby-identifier">:enlisted</span>, <span class="ruby-identifier">:pilots</span>,
478:         <span class="ruby-identifier">:killsYesterday</span>, <span class="ruby-identifier">:killsLastWeek</span>, <span class="ruby-identifier">:killsTotal</span>, <span class="ruby-identifier">:victoryPointsYesterday</span>,
479:         <span class="ruby-identifier">:victoryPointsLastWeek</span>, <span class="ruby-identifier">:victoryPointsTotal</span> ].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">elem</span><span class="ruby-operator">|</span>
480:           <span class="ruby-identifier">elems</span>[<span class="ruby-identifier">elem</span>.<span class="ruby-identifier">to_s</span>] = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;/eveapi/result/&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">elem</span>.<span class="ruby-identifier">to_s</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">inner_html</span>
481:         <span class="ruby-keyword kw">end</span>
482:       <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">CorporateFactionWarParticpant</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">elems</span>)
483:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000117" class="method-detail">
        <a name="M000117"></a>

        <div class="method-heading">
          <a href="#M000117" class="method-signature">
          <span class="method-name">corporate_industry_jobs</span><span class="method-args">(opts = {:characterid =&gt; nil})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a list of <a
href="Classes/CorporateIndustryJob.html">Reve::Classes::CorporateIndustryJob</a>
objects.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000117-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000117-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 269</span>
269:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">corporate_industry_jobs</span>(<span class="ruby-identifier">opts</span> = {<span class="ruby-identifier">:characterid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>})
270:       <span class="ruby-identifier">args</span> = <span class="ruby-identifier">postfields</span>(<span class="ruby-identifier">opts</span>)
271:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">compute_hash</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@corporate_industry_jobs_url</span>))
272:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">h</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>
273:       <span class="ruby-identifier">process_query</span>(<span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">CorporateIndustryJob</span>, <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@corporate_industry_jobs_url</span>,<span class="ruby-keyword kw">false</span>,<span class="ruby-identifier">args</span>)
274:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000142" class="method-detail">
        <a name="M000142"></a>

        <div class="method-heading">
          <a href="#M000142" class="method-signature">
          <span class="method-name">corporate_kills</span><span class="method-args">(opts = { :characterid =&gt; nil })</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
See the options for <a href="API.html#M000141">personal_kills</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000142-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000142-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 669</span>
669:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">corporate_kills</span>(<span class="ruby-identifier">opts</span> = { <span class="ruby-identifier">:characterid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span> })
670:       <span class="ruby-identifier">args</span> = <span class="ruby-identifier">postfields</span>(<span class="ruby-identifier">opts</span>)
671:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">compute_hash</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@corporate_kills_url</span>))
672:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">h</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>
673:       <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">process_query</span>(<span class="ruby-keyword kw">nil</span>,<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@corporate_kills_url</span>,<span class="ruby-keyword kw">true</span>,<span class="ruby-identifier">args</span>)
674:       <span class="ruby-identifier">kills</span> = []
675:       <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;/eveapi/result/rowset/row&quot;</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span>
676:         <span class="ruby-identifier">victim</span> = <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">KillVictim</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">e</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;victim&quot;</span>).<span class="ruby-identifier">first</span>) <span class="ruby-keyword kw">rescue</span> <span class="ruby-keyword kw">next</span> <span class="ruby-comment cmt"># cant find victim</span>
677:         <span class="ruby-identifier">attackers</span> = []
678:         <span class="ruby-identifier">losses</span> = []
679:         <span class="ruby-identifier">e</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;rowset[@name='attackers']/row&quot;</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attacker</span><span class="ruby-operator">|</span>
680:           <span class="ruby-identifier">attackers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">KillAttacker</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">attacker</span>)
681:         <span class="ruby-keyword kw">end</span>
682:         <span class="ruby-identifier">e</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;rowset[@name='items']/row&quot;</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">lost_item</span><span class="ruby-operator">|</span>
683:           <span class="ruby-identifier">lost</span> = <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">KillLoss</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">lost_item</span>)
684:           <span class="ruby-identifier">lost_item</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;rowset[@name='items']/row&quot;</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">contained</span><span class="ruby-operator">|</span>
685:             <span class="ruby-identifier">lost</span>.<span class="ruby-identifier">contained_losses</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">KillLoss</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">contained</span>)
686:           <span class="ruby-keyword kw">end</span>
687:           <span class="ruby-identifier">losses</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">lost</span>
688:         <span class="ruby-keyword kw">end</span>
689:         <span class="ruby-identifier">kills</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">Kill</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">e</span>, <span class="ruby-identifier">victim</span>, <span class="ruby-identifier">attackers</span>, <span class="ruby-identifier">losses</span>)      
690:       <span class="ruby-keyword kw">end</span>
691:       <span class="ruby-identifier">kills</span>
692:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000115" class="method-detail">
        <a name="M000115"></a>

        <div class="method-heading">
          <a href="#M000115" class="method-signature">
          <span class="method-name">corporate_market_orders</span><span class="method-args">(opts = {:characterid =&gt; nil})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a list of <a
href="Classes/MarketOrder.html">Reve::Classes::MarketOrder</a> objects for
market orders that are up on behalf of a Corporation Pass the characterid
of the Character of whose corporation to check for
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000115-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000115-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 253</span>
253:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">corporate_market_orders</span>(<span class="ruby-identifier">opts</span> = {<span class="ruby-identifier">:characterid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>})
254:       <span class="ruby-identifier">args</span> = <span class="ruby-identifier">postfields</span>(<span class="ruby-identifier">opts</span>)
255:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">compute_hash</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@corporate_market_orders_url</span>))
256:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">h</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>
257:       <span class="ruby-identifier">process_query</span>(<span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">CorporateMarketOrder</span>, <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@corporate_market_orders_url</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">args</span>)
258:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000126" class="method-detail">
        <a name="M000126"></a>

        <div class="method-heading">
          <a href="#M000126" class="method-signature">
          <span class="method-name">corporate_medals</span><span class="method-args">(opts = { :characterid =&gt; nil })</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Get the medals a Corporation can give out. Returns a list of <a
href="Classes/CorporateMedal.html">Reve::Classes::CorporateMedal</a>
objects. Expects:
</p>
<ul>
<li>characterid ( Integer | String ) - Get this Medals this Character&#8216;s
Corporation can give out

</li>
</ul>
<p>
See also: <a
href="Classes/CorporateMedal.html">Reve::Classes::CorporateMedal</a>, <a
href="Classes/Medal.html">Reve::Classes::Medal</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000126-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000126-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 412</span>
412:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">corporate_medals</span>(<span class="ruby-identifier">opts</span> = { <span class="ruby-identifier">:characterid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span> })
413:       <span class="ruby-identifier">args</span> = <span class="ruby-identifier">postfields</span>(<span class="ruby-identifier">opts</span>)
414:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">compute_hash</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@corporate_medals_url</span>))
415:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">h</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>
416:       <span class="ruby-identifier">process_query</span>(<span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">CorporateMedal</span>, <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@corporate_medals_url</span>,<span class="ruby-keyword kw">false</span>,<span class="ruby-identifier">args</span>)
417:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000127" class="method-detail">
        <a name="M000127"></a>

        <div class="method-heading">
          <a href="#M000127" class="method-signature">
          <span class="method-name">corporate_member_medals</span><span class="method-args">(opts = { :characterid =&gt; nil })</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Gets the medals the Corporation has given out. Returns a list of <a
href="Classes/CorporateMemberMedal.html">Reve::Classes::CorporateMemberMedal</a>
Expects:
</p>
<ul>
<li>characterid ( Integer | String ) - Get this Medals this Character&#8216;s
Corporation has given out

</li>
</ul>
<p>
See also: <a
href="Classes/CorporateMedal.html">Reve::Classes::CorporateMedal</a>, <a
href="Classes/Medal.html">Reve::Classes::Medal</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000127-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000127-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 425</span>
425:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">corporate_member_medals</span>(<span class="ruby-identifier">opts</span> = { <span class="ruby-identifier">:characterid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span> })
426:       <span class="ruby-identifier">args</span> = <span class="ruby-identifier">postfields</span>(<span class="ruby-identifier">opts</span>)
427:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">compute_hash</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@corp_member_medals_url</span>))
428:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">h</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>
429:       <span class="ruby-identifier">process_query</span>(<span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">CorporateMemberMedal</span>, <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@corp_member_medals_url</span>,<span class="ruby-keyword kw">false</span>,<span class="ruby-identifier">args</span>)
430:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000146" class="method-detail">
        <a name="M000146"></a>

        <div class="method-heading">
          <a href="#M000146" class="method-signature">
          <span class="method-name">corporate_member_security</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Gets the member security list from <a
href="http://api.eve-online.com/corp/MemberSecurityLog.xml.aspx">api.eve-online.com/corp/MemberSecurityLog.xml.aspx</a>
Expects:
</p>
<ul>
<li>characterid ( Fixnum ) - Character to use for the request (This
character&#8216;s corporation will be queried)

</li>
</ul>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000146-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000146-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 820</span>
820:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">corporate_member_security</span>
821:       (<span class="ruby-identifier">opts</span> = { <span class="ruby-identifier">:characterid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span> })
822:       <span class="ruby-identifier">args</span> = <span class="ruby-identifier">postfields</span>(<span class="ruby-identifier">opts</span>)
823:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">compute_hash</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@corporate_member_security_url</span>))
824:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">h</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>
825:       
826:       <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">process_query</span>(<span class="ruby-keyword kw">nil</span>,<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@corporate_member_security_url</span>,<span class="ruby-keyword kw">true</span>,<span class="ruby-identifier">args</span>)
827:       <span class="ruby-identifier">members</span> = []
828:       <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;/eveapi/result//member&quot;</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">melem</span><span class="ruby-operator">|</span>
829:         <span class="ruby-identifier">members</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">CorporateMember</span>.<span class="ruby-identifier">new</span>()
830:         [ <span class="ruby-identifier">:roles</span>, <span class="ruby-identifier">:grantableRoles</span>, <span class="ruby-identifier">:rolesAtHQ</span>, <span class="ruby-identifier">:grantableRolesAtHQ</span>, <span class="ruby-identifier">:rolesAtBase</span>, <span class="ruby-identifier">:grantableRolesAtBase</span>, <span class="ruby-identifier">:rolesAtOther</span>, <span class="ruby-identifier">:grantableRolesAtOther</span> ].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">role_kind</span><span class="ruby-operator">|</span>
831:           <span class="ruby-identifier">melem</span>.<span class="ruby-identifier">search</span>(<span class="ruby-node">&quot;rowset[@name=#{role_kind.to_s}]/row&quot;</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">elem</span><span class="ruby-operator">|</span>
832:             <span class="ruby-identifier">arry</span> = []
833:             <span class="ruby-identifier">role</span> = <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">CorporateRole</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">elem</span>)
834:             <span class="ruby-identifier">arry</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">role</span>
835:             <span class="ruby-identifier">members</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{role_kind}=&quot;</span>.<span class="ruby-identifier">to_sym</span>,<span class="ruby-identifier">arry</span>)
836:           <span class="ruby-keyword kw">end</span>
837:         <span class="ruby-keyword kw">end</span>
838:         
839:       <span class="ruby-keyword kw">end</span>
840:       <span class="ruby-identifier">members</span>
841:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000148" class="method-detail">
        <a name="M000148"></a>

        <div class="method-heading">
          <a href="#M000148" class="method-signature">
          <span class="method-name">corporate_shareholders</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Gets the corporate shareholder list from <a
href="http://api.eve-online.com/corp/Shareholders.xml.aspx">api.eve-online.com/corp/Shareholders.xml.aspx</a>
Expects:
</p>
<ul>
<li>characterid ( Fixnum ) - Character to use for the request (This
character&#8216;s corporation will be queried)

</li>
</ul>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000148-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000148-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 858</span>
858:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">corporate_shareholders</span>
859:       (<span class="ruby-identifier">opts</span> = { <span class="ruby-identifier">:characterid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span> })
860:       <span class="ruby-identifier">args</span> = <span class="ruby-identifier">postfields</span>(<span class="ruby-identifier">opts</span>)
861:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">compute_hash</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@corporate_shareholders_url</span>))
862:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">h</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>
863:       
864:       <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">process_query</span>(<span class="ruby-keyword kw">nil</span>,<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@corporate_shareholders_url</span>,<span class="ruby-keyword kw">true</span>,<span class="ruby-identifier">args</span>)
865:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000147" class="method-detail">
        <a name="M000147"></a>

        <div class="method-heading">
          <a href="#M000147" class="method-signature">
          <span class="method-name">corporate_titles</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Gets the corporate title from <a
href="http://api.eve-online.com/corp/Titles.xml.aspx">api.eve-online.com/corp/Titles.xml.aspx</a>
Expects:
</p>
<ul>
<li>characterid ( Fixnum ) - Character to use for the request (This
character&#8216;s corporation will be queried)

</li>
</ul>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000147-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000147-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 846</span>
846:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">corporate_titles</span>
847:       (<span class="ruby-identifier">opts</span> = { <span class="ruby-identifier">:characterid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span> })
848:       <span class="ruby-identifier">args</span> = <span class="ruby-identifier">postfields</span>(<span class="ruby-identifier">opts</span>)
849:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">compute_hash</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@corporate_titles_url</span>))
850:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">h</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>
851:       
852:       <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">process_query</span>(<span class="ruby-keyword kw">nil</span>,<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@corporate_titles_url</span>,<span class="ruby-keyword kw">true</span>,<span class="ruby-identifier">args</span>)
853:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000121" class="method-detail">
        <a name="M000121"></a>

        <div class="method-heading">
          <a href="#M000121" class="method-signature">
          <span class="method-name">corporate_wallet_balance</span><span class="method-args">(opts = { :characterd =&gt; nil })</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Gets one&#8216;s corporate WalletBalance from <a
href="http://api.eve-online.com/corp/AccountBalance.xml.aspx">api.eve-online.com/corp/AccountBalance.xml.aspx</a>
Expects:
</p>
<ul>
<li>characterid ( Integer | String ) - Look at WalletBalance objects from this
Character&#8216;s Corporation

</li>
</ul>
<p>
See also: <a
href="Classes/WalletBalance.html">Reve::Classes::WalletBalance</a> and <a
href="API.html#M000120">personal_wallet_balance</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000121-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000121-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 344</span>
344:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">corporate_wallet_balance</span>(<span class="ruby-identifier">opts</span> = { <span class="ruby-identifier">:characterd</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span> })
345:       <span class="ruby-identifier">args</span> = <span class="ruby-identifier">postfields</span>(<span class="ruby-identifier">opts</span>)
346:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">compute_hash</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@corporate_wallet_balance_url</span>))
347:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">h</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>
348:       <span class="ruby-identifier">process_query</span>(<span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">WalletBalance</span>,<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@corporate_wallet_balance_url</span>,<span class="ruby-keyword kw">false</span>,<span class="ruby-identifier">args</span>)
349:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000124" class="method-detail">
        <a name="M000124"></a>

        <div class="method-heading">
          <a href="#M000124" class="method-signature">
          <span class="method-name">corporate_wallet_journal</span><span class="method-args">(opts = {:accountkey =&gt; nil, :characterid =&gt; nil, :beforerefid =&gt; nil})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Gets one&#8216;s own corporate WalletJournal list from <a
href="http://api.eve-online.com/corp/WalletJournal.xml.aspx">api.eve-online.com/corp/WalletJournal.xml.aspx</a>
Expects:
</p>
<ul>
<li>account_key ( Integer | String ) - Account key (1000-1006) to look at.

</li>
<li>characterid ( Integer | String ) - Look at WalletJournal objects from this
Character&#8216;s Corporation

</li>
<li>beforerefid ( Integer | String ) - Gets a list of WalletTransaction objects
from before this RefID.

</li>
</ul>
<p>
See also: <a
href="Classes/WalletJournal.html">Reve::Classes::WalletJournal</a> and <a
href="API.html#M000125">personal_wallet_journal</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000124-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000124-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 387</span>
387:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">corporate_wallet_journal</span>(<span class="ruby-identifier">opts</span> = {<span class="ruby-identifier">:accountkey</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:characterid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:beforerefid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>})
388:       <span class="ruby-identifier">args</span> = <span class="ruby-identifier">postfields</span>(<span class="ruby-identifier">opts</span>)
389:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">compute_hash</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@corporate_wallet_journal_url</span>))
390:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">h</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>
391:       <span class="ruby-identifier">process_query</span>(<span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">WalletJournal</span>,<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@corporate_wallet_journal_url</span>,<span class="ruby-keyword kw">false</span>,<span class="ruby-identifier">args</span>)
392:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000123" class="method-detail">
        <a name="M000123"></a>

        <div class="method-heading">
          <a href="#M000123" class="method-signature">
          <span class="method-name">corporate_wallet_transactions</span><span class="method-args">(opts = {:accountkey =&gt; nil, :characterid =&gt; nil, :beforerefid =&gt; nil})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Gets one&#8216;s corporate WalletTransaction list from <a
href="http://api.eve-online.com/corp/WalletTransactions.xml.aspx">api.eve-online.com/corp/WalletTransactions.xml.aspx</a>
Expects:
</p>
<ul>
<li>account_key ( Integer | String ) - Account key (1000-1006) to look at.

</li>
<li>characterid ( Integer | String ) - Look at WalletTransaction objects from
this Character&#8216;s Corporation

</li>
<li>beforetransid ( Integer | String ) - Gets a list of WalletTransaction
objects from before this Transaction ID.

</li>
</ul>
<p>
See also: <a
href="Classes/WalletTransaction.html">Reve::Classes::WalletTransaction</a>
and <a href="API.html#M000122">personal_wallet_transactions</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000123-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000123-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 373</span>
373:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">corporate_wallet_transactions</span>(<span class="ruby-identifier">opts</span> = {<span class="ruby-identifier">:accountkey</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:characterid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:beforerefid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>})
374:       <span class="ruby-identifier">args</span> = <span class="ruby-identifier">postfields</span>(<span class="ruby-identifier">opts</span>)
375:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">compute_hash</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@corporate_wallet_trans_url</span>))
376:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">h</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>
377:       <span class="ruby-identifier">process_query</span>(<span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">CorporateWalletTransaction</span>,<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@corporate_wallet_trans_url</span>,<span class="ruby-keyword kw">false</span>,<span class="ruby-identifier">args</span>)
378:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000143" class="method-detail">
        <a name="M000143"></a>

        <div class="method-heading">
          <a href="#M000143" class="method-signature">
          <span class="method-name">corporation_sheet</span><span class="method-args">(opts = { :characterid =&gt; nil })</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Gets the CorporationSheet from <a
href="http://api.eve-online.com/corp/CorporationSheet.xml.aspx">api.eve-online.com/corp/CorporationSheet.xml.aspx</a>
Expects:
</p>
<ul>
<li>Hash of arguments:

</li>
<li>* characterid ( Integer | String ) - Gets the CorporationSheet for this
Character

</li>
<li>* corporationid ( Integer ) - If the characterid isn&#8216;t passed then
send the corporation&#8216;s id

</li>
</ul>
<p>
(See the <a href="API.html#M000106">alliances</a> method for a list) to get
the details of a Corporation that belongs to an Alliance. See also: <a
href="Classes/CorporationSheet.html">Reve::Classes::CorporationSheet</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000143-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000143-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 701</span>
701:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">corporation_sheet</span>(<span class="ruby-identifier">opts</span> = { <span class="ruby-identifier">:characterid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span> })
702:       <span class="ruby-identifier">args</span> = <span class="ruby-identifier">postfields</span>(<span class="ruby-identifier">opts</span>)
703:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">compute_hash</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@corporation_sheet_url</span>))
704:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">h</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>
705:       <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">process_query</span>(<span class="ruby-keyword kw">nil</span>,<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@corporation_sheet_url</span>,<span class="ruby-keyword kw">true</span>,<span class="ruby-identifier">args</span>)
706: 
707:       <span class="ruby-identifier">h</span> = { <span class="ruby-value str">'graphicid'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-value str">'shape1'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-value str">'shape2'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-value str">'shape3'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-value str">'color1'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-value str">'color2'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-value str">'color3'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>,  }
708:       <span class="ruby-identifier">h</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">k</span><span class="ruby-operator">|</span> <span class="ruby-identifier">h</span>[<span class="ruby-identifier">k</span>] = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;//result/logo/&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">k</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;/&quot;</span>).<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">to_i</span> }
709:       <span class="ruby-identifier">corporate_logo</span> = <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">CorporateLogo</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">h</span>
710:       
711:       <span class="ruby-identifier">wallet_divisions</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;//result/rowset[@name='walletDivisions']/&quot;</span>).<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">k</span><span class="ruby-operator">|</span> <span class="ruby-identifier">k</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">k</span>.<span class="ruby-identifier">kind_of?</span> <span class="ruby-constant">Hpricot</span><span class="ruby-operator">::</span><span class="ruby-constant">Elem</span> } <span class="ruby-operator">-</span> [ <span class="ruby-keyword kw">nil</span> ]
712:       <span class="ruby-identifier">divisions</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;//result/rowset[@name='divisions']/&quot;</span>).<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">k</span><span class="ruby-operator">|</span> <span class="ruby-identifier">k</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">k</span>.<span class="ruby-identifier">kind_of?</span> <span class="ruby-constant">Hpricot</span><span class="ruby-operator">::</span><span class="ruby-constant">Elem</span> } <span class="ruby-operator">-</span> [ <span class="ruby-keyword kw">nil</span> ]
713:       <span class="ruby-identifier">divisions</span>.<span class="ruby-identifier">collect!</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span> <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">CorporateDivision</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">d</span>) }
714:       <span class="ruby-identifier">wallet_divisions</span>.<span class="ruby-identifier">collect!</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">w</span><span class="ruby-operator">|</span> <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">WalletDivision</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">w</span>) }
715:       
716:       <span class="ruby-comment cmt"># Map the XML names to our own names and assign them to the temporary </span>
717:       <span class="ruby-comment cmt"># hash +res+ to pass to Reve::Classes::CorporationSheet#new</span>
718:       <span class="ruby-identifier">res</span> = <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span>
719:       { <span class="ruby-identifier">:corporationid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:id</span>, <span class="ruby-identifier">:corporationname</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:name</span>, <span class="ruby-identifier">:ticker</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:ticker</span>, <span class="ruby-identifier">:ceoid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:ceo_id</span>,
720:         <span class="ruby-identifier">:ceoname</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:ceo_name</span>, <span class="ruby-identifier">:stationid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:station_id</span>, <span class="ruby-identifier">:stationname</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:station_name</span>,
721:         <span class="ruby-identifier">:description</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:description</span>, <span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:url</span>, <span class="ruby-identifier">:allianceid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:alliance_id</span>,
722:         <span class="ruby-identifier">:alliancename</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:alliance_name</span>, <span class="ruby-identifier">:taxrate</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:tax_rate</span>, <span class="ruby-identifier">:membercount</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:member_count</span>,
723:         <span class="ruby-identifier">:memberlimit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:member_limit</span>, <span class="ruby-identifier">:shares</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:shares</span> }.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
724:         <span class="ruby-identifier">res</span>[<span class="ruby-identifier">v</span>] = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-node">&quot;//result/#{k.to_s}/&quot;</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">strip</span>
725:       <span class="ruby-keyword kw">end</span>
726: 
727:       <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">CorporationSheet</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">res</span>, <span class="ruby-identifier">divisions</span>, <span class="ruby-identifier">wallet_divisions</span>, <span class="ruby-identifier">corporate_logo</span>  
728:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000109" class="method-detail">
        <a name="M000109"></a>

        <div class="method-heading">
          <a href="#M000109" class="method-signature">
          <span class="method-name">errors</span><span class="method-args">(opts = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a list of <a href="API.html">API</a> Errors
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000109-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000109-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 211</span>
211:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">errors</span>(<span class="ruby-identifier">opts</span> = {})
212:       <span class="ruby-identifier">compute_hash</span>(  <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@errors_url</span>) ) <span class="ruby-operator">||</span> 
213:         <span class="ruby-identifier">process_query</span>(<span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">APIError</span>,<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@errors_url</span>,<span class="ruby-keyword kw">false</span>)
214:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000133" class="method-detail">
        <a name="M000133"></a>

        <div class="method-heading">
          <span class="method-name">faction_war_occupancy</span><span class="method-args">(opts = {})</span>
        </div>
      
        <div class="method-description">
          <p>
Alias for <a href="API.html#M000132">faction_war_system_stats</a>
</p>
        </div>
      </div>

      <div id="method-M000131" class="method-detail">
        <a name="M000131"></a>

        <div class="method-heading">
          <a href="#M000131" class="method-signature">
          <span class="method-name">faction_war_stats</span><span class="method-args">(opts = {} )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Gets Faction-wide war stats. See also: <a
href="Classes/EveFactionWarStat.html">Reve::Classes::EveFactionWarStat</a>,
<a
href="Classes/FactionwideFactionWarParticpant.html">Reve::Classes::FactionwideFactionWarParticpant</a>,
<a href="Classes/FactionWar.html">Reve::Classes::FactionWar</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000131-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000131-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 488</span>
488:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">faction_war_stats</span>(<span class="ruby-identifier">opts</span> = {} )
489:       <span class="ruby-identifier">args</span> = <span class="ruby-identifier">postfields</span>(<span class="ruby-identifier">opts</span>)
490:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">compute_hash</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@general_faction_war_stats_url</span>))
491:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">h</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>
492:       <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">process_query</span>(<span class="ruby-keyword kw">nil</span>,<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@general_faction_war_stats_url</span>,<span class="ruby-keyword kw">true</span>,<span class="ruby-identifier">args</span>)
493:       <span class="ruby-identifier">participants</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;/eveapi/result/rowset[@name='factions']/row&quot;</span>).<span class="ruby-identifier">collect</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">faction</span><span class="ruby-operator">|</span>
494:         <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">FactionwideFactionWarParticpant</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">faction</span>)
495:       <span class="ruby-keyword kw">end</span>
496:       <span class="ruby-identifier">wars</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;/eveapi/result/rowset[@name='factionWars']/row&quot;</span>).<span class="ruby-identifier">collect</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">faction_war</span><span class="ruby-operator">|</span>
497:         <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">FactionWar</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">faction_war</span>)
498:       <span class="ruby-keyword kw">end</span>
499:       <span class="ruby-identifier">totals</span> = {}
500:       [ <span class="ruby-identifier">:killsYesterday</span>, <span class="ruby-identifier">:killsLastWeek</span>, <span class="ruby-identifier">:killsTotal</span>, <span class="ruby-identifier">:victoryPointsYesterday</span>,
501:         <span class="ruby-identifier">:victoryPointsLastWeek</span>, <span class="ruby-identifier">:victoryPointsTotal</span> ].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">elem</span><span class="ruby-operator">|</span>
502:         <span class="ruby-identifier">totals</span>[<span class="ruby-identifier">elem</span>.<span class="ruby-identifier">to_s</span>] = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;/eveapi/result/totals/&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">elem</span>.<span class="ruby-identifier">to_s</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">inner_html</span>
503:       <span class="ruby-keyword kw">end</span>
504:       <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">EveFactionWarStat</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">totals</span>, <span class="ruby-identifier">wars</span>, <span class="ruby-identifier">participants</span>)
505:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000132" class="method-detail">
        <a name="M000132"></a>

        <div class="method-heading">
          <a href="#M000132" class="method-signature">
          <span class="method-name">faction_war_system_stats</span><span class="method-args">(opts = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the occupancy data for each System. See also: <a
href="Classes/FactionWarSystemStatus.html">Reve::Classes::FactionWarSystemStatus</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000132-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000132-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 509</span>
509:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">faction_war_system_stats</span>(<span class="ruby-identifier">opts</span> = {})
510:       <span class="ruby-identifier">args</span> = <span class="ruby-identifier">postfields</span>(<span class="ruby-identifier">opts</span>)
511:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">compute_hash</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@faction_war_occupancy_url</span>))
512:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">h</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>
513:       <span class="ruby-identifier">process_query</span>(<span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">FactionWarSystemStatus</span>,<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@faction_war_occupancy_url</span>,<span class="ruby-keyword kw">false</span>,<span class="ruby-identifier">args</span>)
514:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000134" class="method-detail">
        <a name="M000134"></a>

        <div class="method-heading">
          <a href="#M000134" class="method-signature">
          <span class="method-name">faction_war_top_stats</span><span class="method-args">(opts = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Gets a list of the top 10 statistics for Characters, Corporations and
Factions in factional warfare. Read the notes on <a
href="Classes/FactionWarTopStats.html">Reve::Classes::FactionWarTopStats</a>.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000134-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000134-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 519</span>
519:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">faction_war_top_stats</span>(<span class="ruby-identifier">opts</span> = {})
520:       <span class="ruby-identifier">args</span> = <span class="ruby-identifier">postfields</span>(<span class="ruby-identifier">opts</span>)
521:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">compute_hash</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@top_faction_war_stats_url</span>))
522:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">h</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>
523:       <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">process_query</span>(<span class="ruby-keyword kw">nil</span>,<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@top_faction_war_stats_url</span>,<span class="ruby-keyword kw">true</span>,<span class="ruby-identifier">args</span>)
524:       <span class="ruby-identifier">template</span> = { <span class="ruby-identifier">:yesterday_kills</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;KillsYesterday&quot;</span>, <span class="ruby-identifier">:last_week_kills</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;KillsLastWeek&quot;</span>, <span class="ruby-identifier">:total_kills</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;KillsTotal&quot;</span>,
525:                    <span class="ruby-identifier">:yesterday_victory_points</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'VictoryPointsYesterday'</span>, <span class="ruby-identifier">:last_week_victory_points</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'VictoryPointsLastWeek'</span>, <span class="ruby-identifier">:total_victory_points</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'VictoryPointsTotal'</span> }
526:       <span class="ruby-comment cmt"># Inject here to save 60 lines.</span>
527:       <span class="ruby-identifier">characters</span> = <span class="ruby-identifier">template</span>.<span class="ruby-identifier">inject</span>({}) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">h</span>,(<span class="ruby-identifier">key</span>,<span class="ruby-identifier">val</span>)<span class="ruby-operator">|</span>
528:         <span class="ruby-identifier">klass</span> = <span class="ruby-identifier">key</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/kills/</span> <span class="ruby-operator">?</span> <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterFactionKills</span> <span class="ruby-operator">:</span> <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterFactionVictoryPoints</span>
529:         <span class="ruby-identifier">h</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">pull_out_top_10_data</span>(<span class="ruby-identifier">xml</span>,<span class="ruby-identifier">klass</span>,<span class="ruby-value str">'characters'</span>,<span class="ruby-identifier">val</span>)
530:         <span class="ruby-identifier">h</span>
531:       <span class="ruby-keyword kw">end</span>
532:       <span class="ruby-identifier">corporations</span> = <span class="ruby-identifier">template</span>.<span class="ruby-identifier">inject</span>({}) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">h</span>,(<span class="ruby-identifier">key</span>,<span class="ruby-identifier">val</span>)<span class="ruby-operator">|</span>
533:         <span class="ruby-identifier">klass</span> = <span class="ruby-identifier">key</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/kills/</span> <span class="ruby-operator">?</span> <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">CorporationFactionKills</span> <span class="ruby-operator">:</span> <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">CorporationFactionVictoryPoints</span>
534:         <span class="ruby-identifier">h</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">pull_out_top_10_data</span>(<span class="ruby-identifier">xml</span>,<span class="ruby-identifier">klass</span>,<span class="ruby-value str">'corporations'</span>,<span class="ruby-identifier">val</span>)
535:         <span class="ruby-identifier">h</span>
536:       <span class="ruby-keyword kw">end</span>
537:       <span class="ruby-identifier">factions</span> = <span class="ruby-identifier">template</span>.<span class="ruby-identifier">inject</span>({}) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">h</span>,(<span class="ruby-identifier">key</span>,<span class="ruby-identifier">val</span>)<span class="ruby-operator">|</span>
538:         <span class="ruby-identifier">klass</span> = <span class="ruby-identifier">key</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/kills/</span> <span class="ruby-operator">?</span> <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">FactionKills</span> <span class="ruby-operator">:</span> <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">FactionVictoryPoints</span>
539:         <span class="ruby-identifier">h</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">pull_out_top_10_data</span>(<span class="ruby-identifier">xml</span>,<span class="ruby-identifier">klass</span>,<span class="ruby-value str">'factions'</span>,<span class="ruby-identifier">val</span>)
540:         <span class="ruby-identifier">h</span>
541:       <span class="ruby-keyword kw">end</span>
542:       <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">FactionWarTopStats</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">characters</span>,<span class="ruby-identifier">corporations</span>,<span class="ruby-identifier">factions</span>)
543:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000107" class="method-detail">
        <a name="M000107"></a>

        <div class="method-heading">
          <a href="#M000107" class="method-signature">
          <span class="method-name">map_jumps</span><span class="method-args">(opts = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a list of the number of jumps for each system. If there are no
jumps for a system it will not be included. See also <a
href="Classes/MapJump.html">Reve::Classes::MapJump</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000107-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000107-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 198</span>
198:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">map_jumps</span>(<span class="ruby-identifier">opts</span> = {})
199:       <span class="ruby-identifier">compute_hash</span>(  <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@map_jumps_url</span>) ) <span class="ruby-operator">||</span>
200:         <span class="ruby-identifier">process_query</span>(<span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">MapJump</span>,<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@map_jumps_url</span>,<span class="ruby-keyword kw">false</span>)
201:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000108" class="method-detail">
        <a name="M000108"></a>

        <div class="method-heading">
          <a href="#M000108" class="method-signature">
          <span class="method-name">map_kills</span><span class="method-args">(opts = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a list of the number of kills for each system. If there are no
kills for a system it will not be included. See also <a
href="Classes/MapKill.html">Reve::Classes::MapKill</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000108-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000108-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 205</span>
205:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">map_kills</span>(<span class="ruby-identifier">opts</span> = {})
206:       <span class="ruby-identifier">compute_hash</span>(  <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@map_kills_url</span>) ) <span class="ruby-operator">||</span>
207:         <span class="ruby-identifier">process_query</span>(<span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">MapKill</span>,<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@map_kills_url</span>,<span class="ruby-keyword kw">false</span>)
208:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000119" class="method-detail">
        <a name="M000119"></a>

        <div class="method-heading">
          <a href="#M000119" class="method-signature">
          <span class="method-name">member_tracking</span><span class="method-args">(opts = {:characterid =&gt; nil})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Does big brother tracking from <a
href="http://api.eve-online.com/corp/MemberTracking.xml.aspx">api.eve-online.com/corp/MemberTracking.xml.aspx</a>
Expects:
</p>
<ul>
<li>characterid ( Integer | String ) - Look at players in this
Character&#8216;s Corporation

</li>
</ul>
<p>
See also: <a
href="Classes/MemberTracking.html">Reve::Classes::MemberTracking</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000119-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000119-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 320</span>
320:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">member_tracking</span>(<span class="ruby-identifier">opts</span> = {<span class="ruby-identifier">:characterid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>})
321:       <span class="ruby-identifier">args</span> = <span class="ruby-identifier">postfields</span>(<span class="ruby-identifier">opts</span>)
322:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">compute_hash</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@member_tracking_url</span>))
323:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">h</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>
324:       <span class="ruby-identifier">process_query</span>(<span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">MemberTracking</span>,<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@member_tracking_url</span>,<span class="ruby-keyword kw">false</span>,<span class="ruby-identifier">args</span>)
325:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000103" class="method-detail">
        <a name="M000103"></a>

        <div class="method-heading">
          <a href="#M000103" class="method-signature">
          <span class="method-name">names_to_ids</span><span class="method-args">(opts = {} )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Convert a list of names to their ids. Expects a Hash as a parameter with
these keys:
</p>
<ul>
<li>names ( Array ) - An Array of Names to fetch the IDs of.

</li>
</ul>
<p>
See Also: <a href="API.html#M000105">character_name</a>, <a
href="Classes/Character.html">Reve::Classes::Character</a>, <a
href="API.html#M000145">character_sheet</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000103-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000103-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 145</span>
145:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">names_to_ids</span>(<span class="ruby-identifier">opts</span> = {} )
146:       <span class="ruby-identifier">names</span> = <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:names</span>] <span class="ruby-operator">||</span> []
147:       <span class="ruby-keyword kw">return</span> [] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">names</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-comment cmt"># No names were passed.</span>
148:       <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:names</span>] = <span class="ruby-identifier">names</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">','</span>)
149:       <span class="ruby-identifier">args</span> = <span class="ruby-identifier">postfields</span>(<span class="ruby-identifier">opts</span>)
150:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">compute_hash</span>(  <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@character_id_url</span>) )
151:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">h</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>
152:       <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">process_query</span>(<span class="ruby-keyword kw">nil</span>,<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@character_id_url</span>, <span class="ruby-keyword kw">true</span>,<span class="ruby-identifier">opts</span>)
153:       <span class="ruby-identifier">ret</span> = []
154:       <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;//rowset/row&quot;</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">elem</span><span class="ruby-operator">|</span>
155:         <span class="ruby-identifier">ret</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">Character</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">elem</span>)
156:       <span class="ruby-keyword kw">end</span>
157:       <span class="ruby-identifier">ret</span>
158:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000135" class="method-detail">
        <a name="M000135"></a>

        <div class="method-heading">
          <a href="#M000135" class="method-signature">
          <span class="method-name">personal_assets_list</span><span class="method-args">(opts = { :characterid =&gt; nil })</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Get a list of personal assets for the characterid. See the <a
href="Classes/Asset.html">Reve::Classes::Asset</a> and <a
href="Classes/AssetContainer.html">Reve::Classes::AssetContainer</a>
classes for attributes available.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000135-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000135-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 548</span>
548:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">personal_assets_list</span>(<span class="ruby-identifier">opts</span> = { <span class="ruby-identifier">:characterid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span> })
549:       <span class="ruby-identifier">args</span> = <span class="ruby-identifier">postfields</span>(<span class="ruby-identifier">opts</span>)
550:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">compute_hash</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@personal_assets_url</span>))
551:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">h</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>
552:       <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">process_query</span>(<span class="ruby-keyword kw">nil</span>,<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@personal_assets_url</span>,<span class="ruby-keyword kw">true</span>,<span class="ruby-identifier">args</span>)
553:       <span class="ruby-identifier">assets</span> = []
554:       <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;/eveapi/result/rowset[@name='assets']/row&quot;</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">container</span><span class="ruby-operator">|</span>
555:         <span class="ruby-identifier">asset_container</span> = <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">AssetContainer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">container</span>)
556:         <span class="ruby-identifier">container</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;rowset[@name='contents']/row&quot;</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">asset</span><span class="ruby-operator">|</span>
557:           <span class="ruby-identifier">asset_container</span>.<span class="ruby-identifier">assets</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">Asset</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">asset</span>)
558:         <span class="ruby-keyword kw">end</span>
559:         <span class="ruby-identifier">assets</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">asset_container</span>
560:       <span class="ruby-keyword kw">end</span>
561:       <span class="ruby-identifier">assets</span>
562:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000129" class="method-detail">
        <a name="M000129"></a>

        <div class="method-heading">
          <a href="#M000129" class="method-signature">
          <span class="method-name">personal_faction_war_stats</span><span class="method-args">(opts = { :characterid =&gt; nil })</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Gets the Reve::Classes::PersonalFactionWarStat for a character. Expects:
</p>
<ul>
<li>characterid ( Integer | String ) - Get this character&#8216;s
PersonalFactionWarStat.

</li>
</ul>
<p>
See Also Reve::Classes::PersonalFactionWarStat and <a
href="API.html#M000130">corporate_faction_war_stats</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000129-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000129-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 453</span>
453:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">personal_faction_war_stats</span>(<span class="ruby-identifier">opts</span> = { <span class="ruby-identifier">:characterid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span> })
454:       <span class="ruby-identifier">args</span> = <span class="ruby-identifier">postfields</span>(<span class="ruby-identifier">opts</span>)
455:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">compute_hash</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@personal_faction_war_stats_url</span>))
456:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">h</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>
457:       <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">process_query</span>(<span class="ruby-keyword kw">nil</span>,<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@personal_faction_war_stats_url</span>,<span class="ruby-keyword kw">true</span>,<span class="ruby-identifier">args</span>)    
458:       <span class="ruby-identifier">elems</span> = {}
459:       [ <span class="ruby-identifier">:factionID</span>, <span class="ruby-identifier">:factionName</span>, <span class="ruby-identifier">:enlisted</span>, <span class="ruby-identifier">:currentRank</span>, <span class="ruby-identifier">:highestRank</span>, 
460:         <span class="ruby-identifier">:killsYesterday</span>, <span class="ruby-identifier">:killsLastWeek</span>, <span class="ruby-identifier">:killsTotal</span>, <span class="ruby-identifier">:victoryPointsYesterday</span>,
461:         <span class="ruby-identifier">:victoryPointsLastWeek</span>, <span class="ruby-identifier">:victoryPointsTotal</span> ].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">elem</span><span class="ruby-operator">|</span>
462:           <span class="ruby-identifier">elems</span>[<span class="ruby-identifier">elem</span>.<span class="ruby-identifier">to_s</span>] = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;/eveapi/result/&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">elem</span>.<span class="ruby-identifier">to_s</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">inner_html</span>
463:         <span class="ruby-keyword kw">end</span>
464:       <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">PersonalFactionWarParticpant</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">elems</span>)
465:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000116" class="method-detail">
        <a name="M000116"></a>

        <div class="method-heading">
          <a href="#M000116" class="method-signature">
          <span class="method-name">personal_industry_jobs</span><span class="method-args">(opts = {:characterid =&gt; nil})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a list of <a
href="Classes/PersonalIndustryJob.html">Reve::Classes::PersonalIndustryJob</a>
objects.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000116-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000116-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 261</span>
261:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">personal_industry_jobs</span>(<span class="ruby-identifier">opts</span> = {<span class="ruby-identifier">:characterid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>})
262:       <span class="ruby-identifier">args</span> = <span class="ruby-identifier">postfields</span>(<span class="ruby-identifier">opts</span>)
263:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">compute_hash</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@personal_industry_jobs_url</span>))
264:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">h</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>
265:       <span class="ruby-identifier">process_query</span>(<span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">PersonalIndustryJob</span>, <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@personal_industry_jobs_url</span>,<span class="ruby-keyword kw">false</span>,<span class="ruby-identifier">args</span>)
266:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000141" class="method-detail">
        <a name="M000141"></a>

        <div class="method-heading">
          <a href="#M000141" class="method-signature">
          <span class="method-name">personal_kills</span><span class="method-args">(opts = { :characterid =&gt; nil })</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Get the last kills for the characterid passed. Expects:
</p>
<ul>
<li>Hash of arguments

</li>
<li>* characterid ( Integer ) - The Character whose Kills to retrieve

</li>
<li>* beforekillid ( Integer ) - (Optional) - Return the most recent kills
before this killid.

</li>
</ul>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000141-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000141-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 643</span>
643:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">personal_kills</span>(<span class="ruby-identifier">opts</span> = { <span class="ruby-identifier">:characterid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span> })
644:       <span class="ruby-identifier">args</span> = <span class="ruby-identifier">postfields</span>(<span class="ruby-identifier">opts</span>)
645:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">compute_hash</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@personal_kills_url</span>))
646:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">h</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>
647:       <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">process_query</span>(<span class="ruby-keyword kw">nil</span>,<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@personal_kills_url</span>,<span class="ruby-keyword kw">true</span>,<span class="ruby-identifier">args</span>)
648:       <span class="ruby-identifier">kills</span> = []
649:       <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;/eveapi/result/rowset/row&quot;</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span>
650:         <span class="ruby-identifier">victim</span> = <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">KillVictim</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">e</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;victim&quot;</span>).<span class="ruby-identifier">first</span>) <span class="ruby-keyword kw">rescue</span> <span class="ruby-keyword kw">next</span> <span class="ruby-comment cmt"># cant find victim</span>
651:         <span class="ruby-identifier">attackers</span> = []
652:         <span class="ruby-identifier">losses</span> = []
653:         <span class="ruby-identifier">e</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;rowset[@name='attackers']/row&quot;</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attacker</span><span class="ruby-operator">|</span>
654:           <span class="ruby-identifier">attackers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">KillAttacker</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">attacker</span>)
655:         <span class="ruby-keyword kw">end</span>
656:         <span class="ruby-identifier">e</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;rowset[@name='items']/row&quot;</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">lost_item</span><span class="ruby-operator">|</span>
657:           <span class="ruby-identifier">lost</span> = <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">KillLoss</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">lost_item</span>)
658:           <span class="ruby-identifier">lost_item</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;rowset[@name='items']/row&quot;</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">contained</span><span class="ruby-operator">|</span>
659:             <span class="ruby-identifier">lost</span>.<span class="ruby-identifier">contained_losses</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">KillLoss</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">contained</span>)
660:           <span class="ruby-keyword kw">end</span>
661:           <span class="ruby-identifier">losses</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">lost</span>
662:         <span class="ruby-keyword kw">end</span>
663:         <span class="ruby-identifier">kills</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">Kill</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">e</span>, <span class="ruby-identifier">victim</span>, <span class="ruby-identifier">attackers</span>, <span class="ruby-identifier">losses</span>)      
664:       <span class="ruby-keyword kw">end</span>
665:       <span class="ruby-identifier">kills</span>
666:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000114" class="method-detail">
        <a name="M000114"></a>

        <div class="method-heading">
          <a href="#M000114" class="method-signature">
          <span class="method-name">personal_market_orders</span><span class="method-args">(opts = {:characterid =&gt; nil})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a list of <a
href="Classes/MarketOrder.html">Reve::Classes::MarketOrder</a> objects for
market orders that are up Pass the characterid of the Character to check
for
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000114-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000114-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 244</span>
244:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">personal_market_orders</span>(<span class="ruby-identifier">opts</span> = {<span class="ruby-identifier">:characterid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>})
245:       <span class="ruby-identifier">args</span> = <span class="ruby-identifier">postfields</span>(<span class="ruby-identifier">opts</span>)
246:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">compute_hash</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@personal_market_orders_url</span>))
247:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">h</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>
248:       <span class="ruby-identifier">process_query</span>(<span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">PersonalMarketOrder</span>, <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@personal_market_orders_url</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">args</span>)
249:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000120" class="method-detail">
        <a name="M000120"></a>

        <div class="method-heading">
          <a href="#M000120" class="method-signature">
          <span class="method-name">personal_wallet_balance</span><span class="method-args">(opts = { :characterid =&gt; nil })</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Gets one&#8216;s own personal WalletBalance from <a
href="http://api.eve-online.com/char/AccountBalance.xml.aspx">api.eve-online.com/char/AccountBalance.xml.aspx</a>
Expects:
</p>
<ul>
<li>characterid ( Integer | String ) - Look at this player&#8216;s
WalletBalance

</li>
</ul>
<p>
See also: <a
href="Classes/WalletBalance.html">Reve::Classes::WalletBalance</a> and <a
href="API.html#M000121">corporate_wallet_balance</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000120-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000120-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 332</span>
332:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">personal_wallet_balance</span>(<span class="ruby-identifier">opts</span> = { <span class="ruby-identifier">:characterid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span> })
333:       <span class="ruby-identifier">args</span> = <span class="ruby-identifier">postfields</span>(<span class="ruby-identifier">opts</span>)
334:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">compute_hash</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@personal_wallet_balance_url</span>))
335:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">h</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>
336:       <span class="ruby-identifier">process_query</span>(<span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">WalletBalance</span>,<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@personal_wallet_balance_url</span>,<span class="ruby-keyword kw">false</span>,<span class="ruby-identifier">args</span>)
337:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000125" class="method-detail">
        <a name="M000125"></a>

        <div class="method-heading">
          <a href="#M000125" class="method-signature">
          <span class="method-name">personal_wallet_journal</span><span class="method-args">(opts = { :characterid =&gt; nil, :beforerefid =&gt; nil} )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Gets one&#8216;s own personal WalletJournal list from <a
href="http://api.eve-online.com/char/WalletJournal.xml.aspx">api.eve-online.com/char/WalletJournal.xml.aspx</a>
Expects:
</p>
<ul>
<li>characterid ( Integer | String ) - Look at this player&#8216;s
WalletJournal list

</li>
<li>beforerefid ( Integer | String ) - Gets a list of WalletJournal objects
from before this RefID.

</li>
</ul>
<p>
See also: <a
href="Classes/WalletJournal.html">Reve::Classes::WalletJournal</a> and <a
href="API.html#M000124">corporate_wallet_journal</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000125-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000125-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 400</span>
400:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">personal_wallet_journal</span>(<span class="ruby-identifier">opts</span> = { <span class="ruby-identifier">:characterid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:beforerefid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>} )
401:       <span class="ruby-identifier">args</span> = <span class="ruby-identifier">postfields</span>(<span class="ruby-identifier">opts</span>)
402:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">compute_hash</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@personal_wallet_journal_url</span>))
403:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">h</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>
404:       <span class="ruby-identifier">process_query</span>(<span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">WalletJournal</span>,<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@personal_wallet_journal_url</span>,<span class="ruby-keyword kw">false</span>,<span class="ruby-identifier">args</span>)
405:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000122" class="method-detail">
        <a name="M000122"></a>

        <div class="method-heading">
          <a href="#M000122" class="method-signature">
          <span class="method-name">personal_wallet_transactions</span><span class="method-args">(opts = { :characterid =&gt; nil, :beforetransid =&gt; nil })</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Gets one&#8216;s own personal WalletTransaction list from <a
href="http://api.eve-online.com/char/WalletTransactions.xml.aspx">api.eve-online.com/char/WalletTransactions.xml.aspx</a>
Expects:
</p>
<ul>
<li>characterid ( Integer | String ) - Look at this player&#8216;s
WalletTransaction list

</li>
<li>beforetransid ( Integer | String ) - Gets a list of WalletTransaction
objects from before this Transaction ID.

</li>
</ul>
<p>
See also: <a
href="Classes/WalletTransaction.html">Reve::Classes::WalletTransaction</a>
and <a href="API.html#M000123">corporate_wallet_transactions</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000122-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000122-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 358</span>
358:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">personal_wallet_transactions</span>(<span class="ruby-identifier">opts</span> = { <span class="ruby-identifier">:characterid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:beforetransid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span> })
359:       <span class="ruby-identifier">args</span> = <span class="ruby-identifier">postfields</span>(<span class="ruby-identifier">opts</span>)
360:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">compute_hash</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@personal_wallet_trans_url</span>) )
361:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">h</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>
362:       <span class="ruby-identifier">process_query</span>(<span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">PersonalWalletTransaction</span>,<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@personal_wallet_trans_url</span>,<span class="ruby-keyword kw">false</span>,<span class="ruby-identifier">args</span>)
363:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000111" class="method-detail">
        <a name="M000111"></a>

        <div class="method-heading">
          <a href="#M000111" class="method-signature">
          <span class="method-name">ref_types</span><span class="method-args">(opts = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a RefType list (whatever they are) from <a
href="http://api.eve-online.com/eve/RefTypes.xml.aspx">api.eve-online.com/eve/RefTypes.xml.aspx</a>
See also: <a href="Classes/RefType.html">Reve::Classes::RefType</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000111-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000111-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 227</span>
227:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ref_types</span>(<span class="ruby-identifier">opts</span> = {})
228:       <span class="ruby-identifier">compute_hash</span>(  <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@reftypes_url</span>) ) <span class="ruby-operator">||</span> 
229:           <span class="ruby-identifier">process_query</span>(<span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">RefType</span>,<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@reftypes_url</span>,<span class="ruby-keyword kw">false</span>)
230:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000102" class="method-detail">
        <a name="M000102"></a>

        <div class="method-heading">
          <a href="#M000102" class="method-signature">
          <span class="method-name">save_path=</span><span class="method-args">(p)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Save XML to this directory with the format:
:save_path/:userid/:method/:expires_at_in_unixtime.xml eg:
./xml/12345/characters/1200228878.xml or: ./xml/alliances/1200228878.xml If
@save_path is nil then XML is not saved.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000102-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000102-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 137</span>
137:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">save_path=</span>(<span class="ruby-identifier">p</span>)
138:       <span class="ruby-ivar">@save_path</span> = <span class="ruby-identifier">p</span>
139:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000138" class="method-detail">
        <a name="M000138"></a>

        <div class="method-heading">
          <a href="#M000138" class="method-signature">
          <span class="method-name">skill_in_training</span><span class="method-args">(opts = {:characterid =&gt; nil})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Gets the SkillInTraining from <a
href="http://api.eve-online.com/char/SkillInTraining.xml.aspx">api.eve-online.com/char/SkillInTraining.xml.aspx</a>
Expects:
</p>
<ul>
<li>characterid ( Integer | String ) - Get the SkillInTraining for this
Character

</li>
</ul>
<p>
See also: <a
href="Classes/SkillInTraining.html">Reve::Classes::SkillInTraining</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000138-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000138-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 596</span>
596:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">skill_in_training</span>(<span class="ruby-identifier">opts</span> = {<span class="ruby-identifier">:characterid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>})
597:       <span class="ruby-identifier">args</span> = <span class="ruby-identifier">postfields</span>(<span class="ruby-identifier">opts</span>)
598:       <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">compute_hash</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@training_skill_url</span>))
599:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">ch</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ch</span>
600:       <span class="ruby-identifier">h</span> = {}
601:       <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">process_query</span>(<span class="ruby-keyword kw">nil</span>,<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@training_skill_url</span>,<span class="ruby-keyword kw">true</span>,<span class="ruby-identifier">args</span>)
602:       <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;//result&quot;</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">elem</span><span class="ruby-operator">|</span>
603:         <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">field</span> <span class="ruby-keyword kw">in</span> [ <span class="ruby-value str">'currentTQTime'</span>, <span class="ruby-value str">'trainingEndTime'</span>,<span class="ruby-value str">'trainingStartTime'</span>,<span class="ruby-value str">'trainingTypeID'</span>,<span class="ruby-value str">'trainingStartSP'</span>,<span class="ruby-value str">'trainingDestinationSP'</span>,<span class="ruby-value str">'trainingToLevel'</span>,<span class="ruby-value str">'skillInTraining'</span> ]
604:           <span class="ruby-identifier">h</span>[<span class="ruby-identifier">field</span>] = (<span class="ruby-identifier">elem</span><span class="ruby-operator">/</span><span class="ruby-identifier">field</span>.<span class="ruby-identifier">intern</span>).<span class="ruby-identifier">inner_html</span>
605:         <span class="ruby-keyword kw">end</span>
606:       <span class="ruby-keyword kw">end</span>
607:       <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">SkillInTraining</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">h</span>)
608:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000118" class="method-detail">
        <a name="M000118"></a>

        <div class="method-heading">
          <a href="#M000118" class="method-signature">
          <span class="method-name">skill_tree</span><span class="method-args">(opts = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the SkillTree from <a
href="http://api.eve-online.com/eve/SkillTree.xml.aspx">api.eve-online.com/eve/SkillTree.xml.aspx</a>
See also: <a href="Classes/SkillTree.html">Reve::Classes::SkillTree</a>
NOTE: This doesn&#8216;t actually return a &#8216;tree&#8217; yet.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000118-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000118-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 280</span>
280:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">skill_tree</span>(<span class="ruby-identifier">opts</span> = {})
281:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">compute_hash</span>(<span class="ruby-identifier">opts</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@skill_tree_url</span>) )
282:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">h</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>
283:       <span class="ruby-identifier">doc</span> = <span class="ruby-identifier">process_query</span>(<span class="ruby-keyword kw">nil</span>,<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@skill_tree_url</span>,<span class="ruby-keyword kw">true</span>)
284:       <span class="ruby-identifier">skills</span> = []
285:       (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'rowset[@name=skills]/row'</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">skill</span><span class="ruby-operator">|</span>
286:         <span class="ruby-identifier">name</span> = <span class="ruby-identifier">skill</span>[<span class="ruby-value str">'typeName'</span>]
287:         <span class="ruby-identifier">type_id</span> = <span class="ruby-identifier">skill</span>[<span class="ruby-value str">'typeID'</span>]
288:         <span class="ruby-identifier">group_id</span> = <span class="ruby-identifier">skill</span>[<span class="ruby-value str">'groupID'</span>]
289:         <span class="ruby-identifier">rank</span> = (<span class="ruby-identifier">skill</span><span class="ruby-operator">/</span><span class="ruby-identifier">:rank</span>).<span class="ruby-identifier">inner_html</span>
290:         <span class="ruby-identifier">desc</span> = (<span class="ruby-identifier">skill</span><span class="ruby-operator">/</span><span class="ruby-identifier">:description</span>).<span class="ruby-identifier">inner_html</span>
291:         <span class="ruby-identifier">required_skills</span> = []
292:         <span class="ruby-identifier">reqs</span> = (<span class="ruby-identifier">skill</span><span class="ruby-operator">/</span><span class="ruby-value str">'rowset@name=[requiredskills]/row'</span>)
293:         <span class="ruby-identifier">reqs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">required</span><span class="ruby-operator">|</span>
294:           <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">required</span>.<span class="ruby-identifier">kind_of?</span> <span class="ruby-constant">Hpricot</span><span class="ruby-operator">::</span><span class="ruby-constant">Text</span> <span class="ruby-comment cmt"># why is this needed? Why is this returned? How can I only get stuff with typeid and skilllevel?</span>
295:           <span class="ruby-identifier">required_skills</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">SkillRequirement</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">required</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">required</span>[<span class="ruby-value str">'typeID'</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">required</span>[<span class="ruby-value str">'skillLevel'</span>]
296:         <span class="ruby-keyword kw">end</span>
297:         <span class="ruby-identifier">required_attribs</span> = []
298:         (<span class="ruby-identifier">skill</span><span class="ruby-operator">/</span><span class="ruby-value str">'requiredAttributes'</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">req</span><span class="ruby-operator">|</span>
299:           <span class="ruby-identifier">pri</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-identifier">req</span>.<span class="ruby-identifier">xpath</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;/primaryAttribute&quot;</span>)
300:           <span class="ruby-identifier">sec</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-identifier">req</span>.<span class="ruby-identifier">xpath</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;/secondaryAttribute&quot;</span>)
301:           <span class="ruby-identifier">required_attribs</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">PrimaryAttribute</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">pri</span>.<span class="ruby-identifier">inner_html</span>)
302:           <span class="ruby-identifier">required_attribs</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">SecondaryAttribute</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">sec</span>.<span class="ruby-identifier">inner_html</span>)
303:         <span class="ruby-keyword kw">end</span>
304:         <span class="ruby-identifier">bonuses</span> = []
305:         <span class="ruby-identifier">res</span> = (<span class="ruby-identifier">skill</span><span class="ruby-operator">/</span><span class="ruby-value str">'rowset@name=[skillBonusCollection]/row'</span>)
306:         <span class="ruby-identifier">res</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">bonus</span><span class="ruby-operator">|</span>
307:           <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">bonus</span>.<span class="ruby-identifier">kind_of?</span> <span class="ruby-constant">Hpricot</span><span class="ruby-operator">::</span><span class="ruby-constant">Text</span>
308:           <span class="ruby-identifier">bonuses</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">SkillBonus</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">bonus</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">bonus</span>[<span class="ruby-value str">'bonusType'</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">bonus</span>[<span class="ruby-value str">'bonusValue'</span>]
309:         <span class="ruby-keyword kw">end</span>
310:         <span class="ruby-identifier">skills</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">SkillTree</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>,<span class="ruby-identifier">type_id</span>,<span class="ruby-identifier">group_id</span>,<span class="ruby-identifier">desc</span>,<span class="ruby-identifier">rank</span>,<span class="ruby-identifier">required_attribs</span>,<span class="ruby-identifier">required_skills</span>,<span class="ruby-identifier">bonuses</span>)
311:       <span class="ruby-keyword kw">end</span>
312:       <span class="ruby-identifier">skills</span>
313:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000110" class="method-detail">
        <a name="M000110"></a>

        <div class="method-heading">
          <a href="#M000110" class="method-signature">
          <span class="method-name">sovereignty</span><span class="method-args">(opts = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the Sovereignty list from <a
href="http://api.eve-online.com/map/Sovereignty.xml.aspx">api.eve-online.com/map/Sovereignty.xml.aspx</a>
See also: <a href="Classes/Sovereignty.html">Reve::Classes::Sovereignty</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000110-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000110-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 219</span>
219:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sovereignty</span>(<span class="ruby-identifier">opts</span> = {})
220:       <span class="ruby-identifier">compute_hash</span>(  <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@sovereignty_url</span>) ) <span class="ruby-operator">||</span> 
221:         <span class="ruby-identifier">process_query</span>(<span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">Sovereignty</span>,<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@sovereignty_url</span>,<span class="ruby-keyword kw">false</span>)
222:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000140" class="method-detail">
        <a name="M000140"></a>

        <div class="method-heading">
          <a href="#M000140" class="method-signature">
          <span class="method-name">starbase_fuel</span><span class="method-args">(opts = { :characterid =&gt; nil, :starbaseid =&gt; nil })</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the fuel status for the Starbase whose item id is starbase_id <a
href="http://api.eve-online.com/corp/StarbaseDetail.xml.aspx">api.eve-online.com/corp/StarbaseDetail.xml.aspx</a>
Expects:
</p>
<ul>
<li>characterid ( Integer | String ) - Get the Starbase associated wih this
character&#8216;s Corporation

</li>
<li>starbase_id ( Integer ) - Get the fuel for this Starbase. This is the
Starbase&#8216;s itemid.

</li>
</ul>
<p>
See also <a
href="Classes/StarbaseFuel.html">Reve::Classes::StarbaseFuel</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000140-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000140-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 628</span>
628:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">starbase_fuel</span>(<span class="ruby-identifier">opts</span> = { <span class="ruby-identifier">:characterid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:starbaseid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span> })
629:       <span class="ruby-identifier">args</span> = <span class="ruby-identifier">postfields</span>(<span class="ruby-identifier">opts</span>)
630:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">compute_hash</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@starbasedetail_url</span>))
631:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">h</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>
632:       <span class="ruby-identifier">ret</span> = <span class="ruby-identifier">process_query</span>(<span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">StarbaseFuel</span>,<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@starbasedetail_url</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">args</span>)
633:       <span class="ruby-identifier">ret</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">starbase_id</span> = <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:starbaseid</span>] }
634:       <span class="ruby-identifier">ret</span>
635:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000139" class="method-detail">
        <a name="M000139"></a>

        <div class="method-heading">
          <a href="#M000139" class="method-signature">
          <span class="method-name">starbases</span><span class="method-args">(opts = { :characterid =&gt; nil})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a list of <a
href="Classes/Starbase.html">Reve::Classes::Starbase</a> for
characterid&#8216;s Corporation. <a
href="http://api.eve-online.com/corp/StarbaseList.xml.aspx">api.eve-online.com/corp/StarbaseList.xml.aspx</a>
Expects:
</p>
<ul>
<li>characterid ( Integer | String ) - Get the Starbase list for this
character&#8216;s Corporation

</li>
</ul>
<p>
See also <a href="Classes/Starbase.html">Reve::Classes::Starbase</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000139-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000139-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 615</span>
615:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">starbases</span>(<span class="ruby-identifier">opts</span> = { <span class="ruby-identifier">:characterid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>})
616:       <span class="ruby-identifier">args</span> = <span class="ruby-identifier">postfields</span>(<span class="ruby-identifier">opts</span>)
617:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">compute_hash</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@@starbases_url</span>))
618:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">h</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>
619:       <span class="ruby-identifier">process_query</span>(<span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes</span><span class="ruby-operator">::</span><span class="ruby-constant">Starbase</span>,<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@starbases_url</span>,<span class="ruby-keyword kw">false</span>,<span class="ruby-identifier">args</span>)
620:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Protected Instance methods</h3>

      <div id="method-M000156" class="method-detail">
        <a name="M000156"></a>

        <div class="method-heading">
          <a href="#M000156" class="method-signature">
          <span class="method-name">build_save_filename</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000156-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000156-source">
<pre>
      <span class="ruby-comment cmt"># File lib/reve.rb, line 1014</span>
1014:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">build_save_filename</span>
1015:       <span class="ruby-identifier">method</span> = <span class="ruby-identifier">caller</span>(<span class="ruby-value">3</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">match</span>(<span class="ruby-regexp re">/\`(.+)'/</span>)[<span class="ruby-value">1</span>] <span class="ruby-comment cmt"># Get the API method that's being called. This is called from save_xml -&gt; process_query -&gt; :real_method</span>
1016:       <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-ivar">@save_path</span>,<span class="ruby-ivar">@userid</span>.<span class="ruby-identifier">to_s</span>,<span class="ruby-identifier">method</span>,( <span class="ruby-ivar">@cached_until</span> <span class="ruby-operator">||</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">utc</span>).<span class="ruby-identifier">to_i</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">+</span> <span class="ruby-value str">'.xml'</span>)
1017:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000154" class="method-detail">
        <a name="M000154"></a>

        <div class="method-heading">
          <a href="#M000154" class="method-signature">
          <span class="method-name">check_exception</span><span class="method-args">(xml)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Raises the proper exception (if there is one), otherwise it returns the XML
response.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000154-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000154-source">
<pre>
      <span class="ruby-comment cmt"># File lib/reve.rb, line 993</span>
 993:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">check_exception</span>(<span class="ruby-identifier">xml</span>)
 994:       <span class="ruby-identifier">x</span> = <span class="ruby-constant">Hpricot</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-identifier">xml</span>)
 995:       <span class="ruby-keyword kw">begin</span>
 996:         <span class="ruby-identifier">out</span> = <span class="ruby-identifier">x</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;//error&quot;</span>) <span class="ruby-comment cmt"># If this fails then there are some big problems with Hpricot#search ?</span>
 997:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span> 
 998:         <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Fatal error ((#{e.to_s})): Couldn't search the XML document ((#{xml})) for any potential error messages! Is your Hpricot broken?&quot;</span>
 999:         <span class="ruby-identifier">exit</span> <span class="ruby-value">1</span>
1000:       <span class="ruby-keyword kw">end</span>
1001:       <span class="ruby-ivar">@current_time</span> = (<span class="ruby-identifier">x</span><span class="ruby-operator">/</span><span class="ruby-identifier">:currentTime</span>).<span class="ruby-identifier">inner_html</span>.<span class="ruby-identifier">to_time</span> <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">utc</span> <span class="ruby-comment cmt"># Shouldn't need to rescue this but one never knows</span>
1002:       <span class="ruby-ivar">@cached_until</span> = (<span class="ruby-identifier">x</span><span class="ruby-operator">/</span><span class="ruby-identifier">:cachedUntil</span>).<span class="ruby-identifier">inner_html</span>.<span class="ruby-identifier">to_time</span> <span class="ruby-keyword kw">rescue</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-comment cmt"># Errors aren't always cached</span>
1003:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">x</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">out</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">1</span>
1004:       <span class="ruby-identifier">code</span> = <span class="ruby-identifier">out</span>.<span class="ruby-identifier">first</span>[<span class="ruby-value str">'code'</span>].<span class="ruby-identifier">to_i</span>
1005:       <span class="ruby-identifier">str</span>  = <span class="ruby-identifier">out</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">inner_html</span>
1006:       <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Exceptions</span>.<span class="ruby-identifier">raise_it</span>(<span class="ruby-identifier">code</span>,<span class="ruby-identifier">str</span>)
1007:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000150" class="method-detail">
        <a name="M000150"></a>

        <div class="method-heading">
          <a href="#M000150" class="method-signature">
          <span class="method-name">compute_hash</span><span class="method-args">(args = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates a hash for some hash of <a href="API.html#M000149">postfields</a>.
For each <a href="API.html">API</a> method pass :just_hash =&gt; to
something to return a hash that can be matched to the last_hash instance
method created in <a href="API.html#M000151">process_query</a>. This method
is called in each <a href="API.html">API</a> method before <a
href="API.html#M000151">process_query</a> and if :just_hash was passed in
args then a String will be returned, otherwise nil will be returned TODO:
Consider moving this whole thing into <a
href="API.html#M000151">process_query</a> before the URI parsing
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000150-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000150-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 887</span>
887:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">compute_hash</span>(<span class="ruby-identifier">args</span> = {})
888:       <span class="ruby-identifier">args</span>.<span class="ruby-identifier">stringify_keys!</span>
889:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'just_hash'</span>)
890:       <span class="ruby-identifier">args</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value str">'just_hash'</span>)
891:       <span class="ruby-identifier">url</span> = <span class="ruby-identifier">args</span>[<span class="ruby-value str">'url'</span>].<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">URI</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">args</span>[<span class="ruby-value str">'url'</span>].<span class="ruby-identifier">path</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">args</span>[<span class="ruby-value str">'url'</span>]
892:       <span class="ruby-identifier">args</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value str">'url'</span>)
893:       <span class="ruby-identifier">spl</span> = <span class="ruby-identifier">url</span>.<span class="ruby-identifier">split</span> <span class="ruby-value str">'/'</span>
894:       <span class="ruby-identifier">ret</span> = (<span class="ruby-identifier">spl</span>[<span class="ruby-value">-2</span>] <span class="ruby-operator">+</span> <span class="ruby-value str">'/'</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">spl</span>[<span class="ruby-value">-1</span>]) <span class="ruby-operator">+</span> <span class="ruby-value str">':'</span>
895:       <span class="ruby-identifier">args</span>.<span class="ruby-identifier">delete_if</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> (<span class="ruby-identifier">v</span> <span class="ruby-operator">||</span> <span class="ruby-value str">&quot;&quot;</span>).<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> } <span class="ruby-comment cmt"># Delete keys if the value is nil</span>
896:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">stringify_keys</span>
897:       <span class="ruby-identifier">ret</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">h</span>.<span class="ruby-identifier">sort</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">collect</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">to_s</span> }.<span class="ruby-identifier">join</span>(<span class="ruby-value str">':'</span>)
898:       <span class="ruby-identifier">ret</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/:$/</span>,<span class="ruby-value str">''</span>)
899:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000152" class="method-detail">
        <a name="M000152"></a>

        <div class="method-heading">
          <a href="#M000152" class="method-signature">
          <span class="method-name">format_url_request</span><span class="method-args">(opts)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Turns a hash into ?var=baz&amp;bam=boo
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000152-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000152-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 931</span>
931:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">format_url_request</span>(<span class="ruby-identifier">opts</span>)
932:       <span class="ruby-identifier">req</span> = <span class="ruby-value str">&quot;?&quot;</span>
933: 
934:       <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">stringify_keys!</span>
935:       <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">sort</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span>
936:         <span class="ruby-identifier">req</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;#{CGI.escape(key.to_s)}=#{CGI.escape(opts[key].to_s)}&amp;&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">key</span>]
937:       <span class="ruby-keyword kw">end</span>
938:       <span class="ruby-identifier">req</span>.<span class="ruby-identifier">chop</span> <span class="ruby-comment cmt"># We are lazy and append a &amp; to each pair even if it's the last one. FIXME: Don't do this.</span>
939:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000153" class="method-detail">
        <a name="M000153"></a>

        <div class="method-heading">
          <a href="#M000153" class="method-signature">
          <span class="method-name">get_xml</span><span class="method-args">(source,opts)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Gets the XML from a source. Expects:
</p>
<ul>
<li>source ( String | URI ) - If the <tt>source</tt> is a String Reve will
attempt to load the XML file from the local filesystem by the path
specified as <tt>source</tt>. If the <tt>source</tt> is a URI or is a
String starting with http (lowercase) Reve will fetch it from that URI on
the web.

</li>
<li>opts ( Hash ) - Hash of parameters for the request, such as userid, apikey
and such.

</li>
</ul>
<p>
NOTE: To override the lowercase http -&gt; URI rule make the HTTP part
uppercase.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000153-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000153-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 947</span>
947:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_xml</span>(<span class="ruby-identifier">source</span>,<span class="ruby-identifier">opts</span>)
948:       <span class="ruby-identifier">xml</span> = <span class="ruby-value str">&quot;&quot;</span>
949:       
950:       <span class="ruby-comment cmt"># Let people still pass Strings starting with http.</span>
951:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">source</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^http/</span>
952:         <span class="ruby-identifier">source</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">source</span>)
953:       <span class="ruby-keyword kw">end</span>
954:       
955:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">source</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">URI</span>)
956:         <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">merge</span>({ <span class="ruby-identifier">:version</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span> }) <span class="ruby-comment cmt">#the uri bit will now ignored in format_url_request</span>
957:         <span class="ruby-identifier">req_args</span> =  <span class="ruby-identifier">format_url_request</span>(<span class="ruby-identifier">opts</span>)
958:         <span class="ruby-identifier">req</span> = <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">HTTP</span><span class="ruby-operator">::</span><span class="ruby-constant">Get</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">source</span>.<span class="ruby-identifier">path</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">req_args</span>)
959:         <span class="ruby-identifier">req</span>[<span class="ruby-value str">'User-Agent'</span>] = <span class="ruby-ivar">@http_referer_agent</span> <span class="ruby-operator">||</span> <span class="ruby-value str">&quot;Reve&quot;</span>
960:         
961:         <span class="ruby-identifier">res</span> = <span class="ruby-keyword kw">nil</span>
962:         <span class="ruby-identifier">response</span> = <span class="ruby-keyword kw">nil</span>
963:         <span class="ruby-value">1</span>.<span class="ruby-identifier">upto</span>(<span class="ruby-ivar">@max_tries</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">try</span><span class="ruby-operator">|</span>
964:           <span class="ruby-keyword kw">begin</span>
965:             <span class="ruby-comment cmt"># ||= to prevent making a new Net::HTTP object, the res = nil above should reset this for the next request.</span>
966:             <span class="ruby-comment cmt"># the request needs to be here to rescue exceptions from it.</span>
967:             <span class="ruby-identifier">res</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">HTTP</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">source</span>.<span class="ruby-identifier">host</span>, <span class="ruby-identifier">source</span>.<span class="ruby-identifier">port</span>).<span class="ruby-identifier">start</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">http</span><span class="ruby-operator">|</span> <span class="ruby-identifier">http</span>.<span class="ruby-identifier">request</span>(<span class="ruby-identifier">req</span>) }
968:             <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">res</span>
969:             <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">HTTPSuccess</span>, <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">HTTPRedirection</span>
970:               <span class="ruby-identifier">response</span> = <span class="ruby-identifier">res</span>.<span class="ruby-identifier">body</span>
971:             <span class="ruby-keyword kw">end</span>
972:           <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span>
973:             <span class="ruby-identifier">sleep</span> <span class="ruby-value">5</span>
974:             <span class="ruby-keyword kw">next</span>
975:           <span class="ruby-keyword kw">end</span>
976:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">response</span>
977:         <span class="ruby-keyword kw">end</span>
978:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Exceptions</span><span class="ruby-operator">::</span><span class="ruby-constant">ReveNetworkStatusException</span>.<span class="ruby-identifier">new</span>( (<span class="ruby-identifier">res</span>.<span class="ruby-identifier">body</span> <span class="ruby-keyword kw">rescue</span> <span class="ruby-value str">&quot;No Response Body!&quot;</span>) ) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">response</span>
979:         
980:         <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">response</span>
981:       
982:       <span class="ruby-comment cmt"># here ends test for URI</span>
983:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">source</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">String</span>)
984:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">source</span>).<span class="ruby-identifier">read</span>
985:       <span class="ruby-keyword kw">else</span>
986:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">Reve</span><span class="ruby-operator">::</span><span class="ruby-constant">Exceptions</span><span class="ruby-operator">::</span><span class="ruby-constant">ReveNetworkStatusException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;Don't know how to deal with a #{source.class} XML source. I expect a URI or String&quot;</span>)
987:       <span class="ruby-keyword kw">end</span>
988:       <span class="ruby-identifier">xml</span>
989:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000149" class="method-detail">
        <a name="M000149"></a>

        <div class="method-heading">
          <a href="#M000149" class="method-signature">
          <span class="method-name">postfields</span><span class="method-args">(opts = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Sets up the post fields for Net::HTTP::Get hash for <a
href="API.html#M000151">process_query</a> method. See also <a
href="API.html#M000152">format_url_request</a> TODO: Consider moving this
whole thing into <a href="API.html#M000151">process_query</a> to avoid
calling this in every method!
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000149-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000149-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 872</span>
872:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">postfields</span>(<span class="ruby-identifier">opts</span> = {})
873:       <span class="ruby-identifier">ret</span> = { <span class="ruby-value str">&quot;userid&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@userid</span>, <span class="ruby-value str">&quot;apikey&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@key</span>, <span class="ruby-value str">&quot;characterid&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@charid</span> }.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">opts</span>.<span class="ruby-identifier">stringify_keys</span>)
874:       <span class="ruby-identifier">ret</span>.<span class="ruby-identifier">inject</span>({}) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">n</span>, (<span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span>)<span class="ruby-operator">|</span>
875:         <span class="ruby-identifier">n</span>[<span class="ruby-identifier">k</span>.<span class="ruby-identifier">downcase</span>] = <span class="ruby-identifier">v</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">v</span>
876:         <span class="ruby-identifier">n</span>
877:       <span class="ruby-keyword kw">end</span>
878:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000151" class="method-detail">
        <a name="M000151"></a>

        <div class="method-heading">
          <a href="#M000151" class="method-signature">
          <span class="method-name">process_query</span><span class="method-args">(klass, url, just_xml = false, opts = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Processes a URL and for simple &lt;rowset&gt;&lt;row /&gt;&lt;row
/&gt;&lt;/rowset&gt; results create an array of objects of type klass. Or
just return the XML if just_xml is set true. args is from <a
href="API.html#M000149">postfields</a> This method will call <a
href="API.html#M000154">check_exception</a> to see if an Exception came
from CCP. Expects:
</p>
<ul>
<li>klass ( Class ) - The class container for parsing. An array of these is
returned in default behaviour.

</li>
<li>url ( String ) - <a href="API.html">API</a> URL

</li>
<li>just_xml ( Boolean ) - Return only the XML and not attempt to parse
//rowset/row. Useful if the XML is not in that form.

</li>
<li>args ( Hash ) - Hash of arguments for the request. See <a
href="API.html#M000149">postfields</a> method.

</li>
</ul>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000151-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000151-source">
<pre>
     <span class="ruby-comment cmt"># File lib/reve.rb, line 911</span>
911:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">process_query</span>(<span class="ruby-identifier">klass</span>, <span class="ruby-identifier">url</span>, <span class="ruby-identifier">just_xml</span> = <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">opts</span> = {})
912: 
913:       <span class="ruby-comment cmt">#args = postfields(opts)</span>
914:       <span class="ruby-comment cmt">#h = compute_hash(args.merge(:url =&gt; url))</span>
915:       <span class="ruby-comment cmt">#return h if h</span>
916: 
917:       <span class="ruby-ivar">@last_hash</span> = <span class="ruby-identifier">compute_hash</span>(<span class="ruby-identifier">opts</span>.<span class="ruby-identifier">merge</span>({<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">url</span>, <span class="ruby-identifier">:just_hash</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span> })) <span class="ruby-comment cmt"># compute hash</span>
918:       
919:       <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">check_exception</span>(<span class="ruby-identifier">get_xml</span>(<span class="ruby-identifier">url</span>,<span class="ruby-identifier">opts</span>))
920:       <span class="ruby-identifier">save_xml</span>(<span class="ruby-identifier">xml</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@save_path</span>
921: 
922:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">xml</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">just_xml</span>
923:       <span class="ruby-keyword kw">return</span> [] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-comment cmt"># No XML document returned. We should panic.</span>
924:       
925:       <span class="ruby-comment cmt"># Create the array of klass objects to return, assume we start with an empty set from the XML search for rows</span>
926:       <span class="ruby-comment cmt"># and build from there.</span>
927:       <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;//rowset/row&quot;</span>).<span class="ruby-identifier">inject</span>([]) { <span class="ruby-operator">|</span><span class="ruby-identifier">ret</span>,<span class="ruby-identifier">elem</span><span class="ruby-operator">|</span> <span class="ruby-identifier">ret</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">elem</span>) }
928:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000157" class="method-detail">
        <a name="M000157"></a>

        <div class="method-heading">
          <a href="#M000157" class="method-signature">
          <span class="method-name">pull_out_top_10_data</span><span class="method-args">(xml,klass,kind,field)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns an array of <tt>klass</tt>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000157-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000157-source">
<pre>
      <span class="ruby-comment cmt"># File lib/reve.rb, line 1020</span>
1020:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pull_out_top_10_data</span>(<span class="ruby-identifier">xml</span>,<span class="ruby-identifier">klass</span>,<span class="ruby-identifier">kind</span>,<span class="ruby-identifier">field</span>)
1021:       <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-node">&quot;/eveapi/result/#{kind}/rowset[@name='#{field}']/row&quot;</span>).<span class="ruby-identifier">inject</span>([]) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">all</span>,<span class="ruby-identifier">row</span><span class="ruby-operator">|</span>
1022:         <span class="ruby-identifier">all</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">row</span>)
1023:         <span class="ruby-identifier">all</span>
1024:       <span class="ruby-keyword kw">end</span>
1025:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000155" class="method-detail">
        <a name="M000155"></a>

        <div class="method-heading">
          <a href="#M000155" class="method-signature">
          <span class="method-name">save_xml</span><span class="method-args">(xml)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000155-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000155-source">
<pre>
      <span class="ruby-comment cmt"># File lib/reve.rb, line 1009</span>
1009:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">save_xml</span>(<span class="ruby-identifier">xml</span>)
1010:       <span class="ruby-identifier">path</span> = <span class="ruby-identifier">build_save_filename</span>
1011:       <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">path</span>))
1012:       <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>,<span class="ruby-value str">'w'</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">print</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">to_original_html</span> }
1013:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>